const getParentByNode=(e,t)=>{if(e&&e.nodeName!==t)for(;e&&e.nodeName!==t;)e=e.parentNode;return"#document"===e?.nodeName?null:e},getParentByClassname=(e,t)=>{if(e&&e.classList&&!e.classList.contains(t))for(;e&&e.classList&&!e.classList.contains(t);)e=e.parentNode;return"#document"===e?.nodeName?null:e},validation={isNotEmpty:e=>{const t=/(^\s*)|(\s*$)/g;let a=e.value.replace(t,"");return"undefined"!=typeof CKEDITOR&&void 0!==CKEDITOR.instances[e.name]&&(a=CKEDITOR.instances[e.name].getData().replace(t,"")),""!==a},isInt:e=>/^\-?\+?\d+$/.test(e.value)};window.onload=()=>{const e=new ScrollMagic.Controller,t=document.querySelector("[data-loader]");setTimeout((()=>{t.classList.add("hidden"),setTimeout((()=>t.remove()),500)}),500);const a=document.querySelector("[data-header]");let s=window.pageYOffset;const r=e=>{const t=window.pageYOffset;a.classList[t>5?"add":"remove"]("bg"),e&&a.classList[t<s||t<=10?"remove":"add"]("hidden"),s=t};r(!1),window.addEventListener("scroll",(()=>r(!0)));const i=Array.from(document.querySelectorAll("[data-swiper]"));let o,n,l;window.swipers={};for(let e in i){switch(i[e].getAttribute("data-swiper")){case"main":window.swipers.main=new Swiper(i[e],{effect:"fade",loop:!0,allowTouchMove:!1,on:{init:t=>{Array.from(t.el.querySelectorAll("[data-video-btn]")).map((a=>a.addEventListener("click",(({target:a})=>{(a=getParentByNode(a,"BUTTON")).classList.toggle("active"),a.classList.contains("active")?(t.el.classList.toggle("active"),t.el.classList.add("animate1"),setTimeout((()=>t.el.classList.add("animate2")),150)):(t.el.classList.remove("animate2"),setTimeout((()=>{t.el.classList.remove("animate1"),setTimeout((()=>t.el.classList.toggle("active")),150)}),150)),setTimeout((()=>t.el.nextElementSibling.classList.toggle("opacity")),150),document.body.classList.toggle("overflow"),document.body.classList.contains("overflow")?i[e].parentNode.parentNode.classList.add("fullscreen"):setTimeout((()=>i[e].parentNode.parentNode.classList.remove("fullscreen")),700)}))))}}});break;case"main_thumb":new Swiper(i[e],{loop:!0,allowTouchMove:!1,autoHeight:!0,navigation:{nextEl:".main_thumb_next",prevEl:".main_thumb_prev"},on:{slideChange:e=>window.swipers.main.slideTo(e.realIndex)}});break;case"main_side":new Swiper(i[e],{loop:!0,allowTouchMove:!1,autoplay:!0});break;case"card":o=i[e].querySelector(".swipernavs"),n=o.querySelector(".card_prev"),l=o.querySelector(".card_next"),new Swiper(i[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:l,prevEl:n}});break;case"news":o=i[e].querySelector(".swipernavs"),n=o.querySelector(".news_prev"),l=o.querySelector(".news_next"),new Swiper(i[e],{slidesPerView:2,spaceBetween:16,navigation:{nextEl:l,prevEl:n}});break;case"quiz":const t=i[e].querySelector("[data-quiz-steps]"),a=e=>{t&&(t.innerHTML=`Шаг ${e.realIndex+1}<span>из ${e.slides.length}</span>`),e.el.classList[e.realIndex+1===e.slides.length?"add":"remove"]("hidden")},s=Array.from(document.querySelectorAll("[data-quiz-step]")),r=document.querySelector('[data-quiz-step="prev"]');window.swipers.quiz=new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,on:{init:e=>a(e),slideChange:e=>a(e)}});for(let e in s)s[e].addEventListener("click",(({target:e})=>{e=getParentByNode(e,"BUTTON");const t=window.swipers.quiz.realIndex,a=window.swipers.quiz.slides[t],s=Array.from(a.querySelectorAll("[data-validate]"));let i=!1;for(let e in s){let t=!0;switch(s[e].getAttribute("data-validate")){case"text":t=validation.isNotEmpty(s[e]),s[e].classList[t?"remove":"add"]("error"),t||(i=!0);break;case"number":t=validation.isInt(s[e]),s[e].classList[t?"remove":"add"]("error"),t||(i=!0)}}i||("prev"===e.getAttribute("data-quiz-step")?window.swipers.quiz.slidePrev():window.swipers.quiz.slideNext(),r.classList[t?"remove":"add"]("disable"))}));break;case"history":window.swipers.history=new Swiper(i[e],{slidesPerView:4,spaceBetween:16});const c=Array.from(i[e].querySelectorAll("[data-history-step]"));for(let e in c)c[e].addEventListener("click",(({target:e})=>{if(!e.classList.contains("active")){const t=c.find((e=>e.classList.contains("active")));t&&t.classList.remove("active"),e.classList.add("active");const a=e.getAttribute("data-history-step"),s=window.swipers.history.slides.findIndex((e=>e.getAttribute("data-history-target")==a));window.swipers.history.slideTo(s)}}));break;case"values":new Swiper(i[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:".values_next",prevEl:".values_prev"}});break;case"career":new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,navigation:{nextEl:".next_carrer",prevEl:".prev_carrer"}});break;case"contacts":new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,navigation:{nextEl:".next_contacts",prevEl:".prev_contacts"}});break;case"where_to_buy":window.swipers.whereToBuy=new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,navigation:{nextEl:".next_where_to_buy",prevEl:".prev_where_to_buy"}});break;case"contract_production":window.swipers.contractProduction=new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!1});const d=Array.from(document.querySelectorAll("[data-contract-production-step]"));for(let e in d)d[e].addEventListener("click",(({target:e})=>{if(!(e=getParentByNode(e,"BUTTON")).classList.contains("active")){const t=document.querySelector("[data-contract-production-step].active");t&&t.classList.remove("active"),e.classList.add("active"),window.swipers.contractProduction.slideTo(parseInt(e.getAttribute("data-contract-production-step")))}}));const u=Array.from(document.querySelectorAll(".tooltip"));for(let e in u){u[e].querySelector(".tooltip__btn").addEventListener("click",(()=>{u[e].classList.toggle("active")}))}break;case"contract_production_why":new Swiper(i[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:".contract_production_why_next",prevEl:".contract_production_why_prev"}});break;case"gallery":window.swipers.gallery=new Swiper(i[e],{effect:"fade",loop:!0,allowTouchMove:!1,on:{init:t=>{Array.from(t.el.querySelectorAll("[data-video-btn]")).map((a=>a.addEventListener("click",(({target:a})=>{(a=getParentByNode(a,"BUTTON")).classList.toggle("active"),a.classList.contains("active")?(t.el.classList.toggle("active"),t.el.classList.add("animate1"),setTimeout((()=>t.el.classList.add("animate2")),150)):(t.el.classList.remove("animate2"),setTimeout((()=>{t.el.classList.remove("animate1"),setTimeout((()=>t.el.classList.toggle("active")),150)}),150)),setTimeout((()=>t.el.nextElementSibling.classList.toggle("opacity")),150),document.body.classList.toggle("overflow"),document.body.classList.contains("overflow")?i[e].parentNode.parentNode.classList.add("fullscreen"):setTimeout((()=>i[e].parentNode.parentNode.classList.remove("fullscreen")),700)}))))}}});break;case"gallery_thumb":new Swiper(i[e],{direction:"vertical",slidesPerView:4,spaceBetween:16,navigation:{nextEl:".gallery_thumb_next",prevEl:".gallery_thumb_prev"},on:{init:e=>{for(let t in e.slides)0==t&&e.slides[t].classList.add("active"),e.slides[t].addEventListener("click",(({target:a})=>{if(!e.slides[t].classList.contains("active")){window.swipers.gallery.slideTo(t),e.slideTo(t);const s=e.slides.find((e=>e.classList.contains("active")));s&&s.classList.remove("active"),(a=getParentByClassname(a,"swiper-slide")).classList.add("active")}}))},slideChange:e=>window.swipers.gallery.slideTo(e.realIndex)}});break;case"product":window.swipers.contractProduction=new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0});const m=Array.from(document.querySelectorAll("[data-product-step]"));for(let e in m)m[e].addEventListener("click",(({target:e})=>{if(!(e=getParentByNode(e,"BUTTON")).classList.contains("active")){const t=document.querySelector("[data-product-step].active");t&&t.classList.remove("active"),e.classList.add("active"),window.swipers.contractProduction.slideTo(parseInt(e.getAttribute("data-product-step")))}}));break;case"swiper_scroll":new Swiper(i[e],{slidesPerView:"auto",freeMode:!0,scrollbar:{el:".swiper-scrollbar"},mousewheel:!0});break;case"similars":new Swiper(i[e],{slidesPerView:4,spaceBetween:16,navigation:{nextEl:".similars_next",prevEl:".similars_prev"}});break;case"selectbox":window.swipers.selectbox=new Swiper(i[e],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0});break;case"certificates":const w=getParentByClassname(i[e],"modalbox").querySelector("[data-certificates-steps]"),p=e=>{w&&(w.innerHTML=`${e.realIndex+1} / ${e.slides.length}`)};window.swipers.certificates=new Swiper(i[e],{slidesPerView:3,centeredSlides:!0,navigation:{nextEl:".certificates_next",prevEl:".certificates_prev"},on:{init:e=>p(e),slideChange:e=>p(e)}})}}const c=document.querySelector("[data-animation-flask]");c&&(new ScrollMagic.Scene({triggerElement:c,duration:600}).setTween(c,{rotate:0}).addTo(e),new ScrollMagic.Scene({triggerElement:c,duration:550}).setTween("[data-animation-flask-fill]",{rotate:0,height:"90%"}).addTo(e));const d=document.querySelector("[data-animation-bottle]");d&&new ScrollMagic.Scene({triggerElement:d,duration:d.clientHeight}).setTween(d,{rotate:0}).addTo(e);const u=document.querySelector("[data-animation-big-logo]"),m=document.querySelector("[data-animation-big-logo-triger]");u&&new ScrollMagic.Scene({triggerElement:u.parentNode,duration:2e3,offset:350}).setTween(u,{bottom:-2*m.clientHeight,opacity:0}).addTo(e);const w=document.querySelector("[data-animation-small-logo]");w&&new ScrollMagic.Scene({triggerElement:w.parentNode,duration:w.clientHeight}).setTween(w,{rotate:0}).addTo(e);const p=window.innerWidth<600?60:120;AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:p,delay:0,duration:800,easing:"ease",once:!0,mirror:!1,anchorPlacement:"top-bottom"}),document.addEventListener("aos:in",(({detail:e})=>{const t=parseInt(e.getAttribute("data-count"));if(t){const a=getParentByNode(e,"LI");a.style.width=`${a.offsetWidth}px`,a.style.height=`${a.offsetHeight}px`;let s=parseInt(e.getAttribute("data-step"));s=s||1;let r=0,i=setInterval((()=>{r+=s,e.innerHTML=r,r>=t&&(e.innerHTML=t,a.removeAttribute("style"),clearInterval(i))}),e.getAttribute("data-speed"))}}));const g=Array.from(document.querySelectorAll("[data-scrollbar]"));for(let e in g)new PerfectScrollbar(g[e],{wheelSpeed:.5});const v=Array.from(document.querySelectorAll("[data-modal-triger]"));let f=!1;const y=e=>{f||(f=!0,document.body.classList.toggle("noscroll"),e.classList.contains("open")?(e.classList.remove("open"),setTimeout((()=>{e.classList.remove("active"),f=!1}),200)):(e.classList.add("active"),setTimeout((()=>{e.classList.add("open"),f=!1}),200)))};for(let e in v)v[e].addEventListener("click",(({target:e})=>{if(e=e.classList.contains("modalbox")?e:getParentByNode(e,"BUTTON")){const t=e.classList.contains("modalbox")?e.getAttribute("data-modal-target"):e.getAttribute("data-modal-triger");(e=document.querySelector(`[data-modal-target="${t}"]`))&&y(e)}}));const L=Array.from(document.querySelectorAll("[data-accordion]"));for(let e in L)L[e].addEventListener("click",(({target:e})=>{(e=getParentByNode(e,"BUTTON")).classList.toggle("active"),e.classList.contains("active")?e.nextElementSibling.style.maxHeight=`${e.nextElementSibling.scrollHeight}px`:e.nextElementSibling.removeAttribute("style")}));const b=Array.from(document.querySelectorAll("[data-select]"));for(let e in b)b[e].addEventListener("click",(({target:e})=>{if(!(e=getParentByNode(e,"BUTTON")).classList.contains("open")){const e=document.querySelector("[data-select].open");e&&(e.classList.remove("open"),e.nextElementSibling.classList.remove("open"))}e.classList.toggle("open"),e.nextElementSibling.classList.toggle("open")}));const S=Array.from(document.querySelectorAll("[data-select-value]"));for(let e in S)S[e].addEventListener("click",(({target:e})=>{e=getParentByNode(e,"BUTTON");const t=getParentByClassname(e,"hiddenbox");t.classList.remove("open"),t.previousElementSibling.classList.remove("open"),t.previousElementSibling.innerHTML=e.innerHTML,window.swipers.selectbox.slideTo(parseInt(e.getAttribute("data-select-value")))}));const h=Array.from(document.querySelectorAll("[datepicker]"));for(let e in h)h[e].addEventListener("input",(()=>{h[e].value=""})),datepicker(h[e],{customDays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],customMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],customOverlayMonths:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],overlayButton:"Применить",overlayPlaceholder:"Изменить год ?",formatter:(e,t)=>{e.value=t.toLocaleDateString()}});const E=Array.from(document.querySelectorAll("[data-textbox]"));for(let e in E)E[e].addEventListener("mouseover",(({target:e})=>{(e=(e=getParentByNode(e,"LI")).querySelector(".text")).style.height=`${e.scrollHeight+10}px`,e.style.paddingTop="10px"})),E[e].addEventListener("mouseout",(({target:e})=>{(e=(e=getParentByNode(e,"LI")).querySelector(".text")).removeAttribute("style")}));window.lightGalleryInstance=lightGallery(document.querySelector("[lightgallery]"));const T=document.querySelector("[data-test]");T&&T.addEventListener("click",(({target:e})=>{const t=e.parentNode.previousElementSibling;t.innerHTML=t.innerHTML+t.innerHTML,window.lightGalleryInstance.refresh()}));const A=Array.from(document.querySelectorAll("[data-mask]")),x={oncomplete:e=>k(e.currentTarget),onincomplete:e=>k(e.currentTarget)};for(let e in A){if("phone"===A[e].getAttribute("data-mask"))Inputmask({...x,mask:"+7 (999) 999-99-99",clearIncomplete:!0}).mask(A[e])}const q=Array.from(document.querySelectorAll('input[type="text"]')),N=Array.from(document.querySelectorAll("textarea")),_=q.concat(N),k=e=>{e.classList[validation.isNotEmpty(e)?"add":"remove"]("ready"),e.classList.remove("error")};for(let e in _)_[e].addEventListener("input",(({target:e})=>k(e)));const P=Array.from(document.querySelectorAll("[validate]"));let B=!0;for(let e in P)P[e].addEventListener("submit",(t=>{t.preventDefault();const a=Array.from(P[e].querySelectorAll("[data-validate]"));let s=!1;for(let e in a){let t=!0;switch(a[e].getAttribute("data-validate")){case"text":t=validation.isNotEmpty(a[e]),a[e].classList[t?"remove":"add"]("error"),t||(s=!0);break;case"number":t=validation.isInt(a[e]),a[e].classList[t?"remove":"add"]("error"),t||(s=!0)}}if(s)t.preventDefault();else{const a=getParentByClassname(P[e],"modal");a&&y(a),setTimeout((()=>{const e=document.querySelector(`[data-modal-target="${B?"feedback_success":"feedback_error"}"]`);e&&y(e),B=!B}),200),t.preventDefault()}}));searchField.addEventListener("focusin",(()=>{searchForm.classList.add("active"),searchField.oninput=()=>{console.log(searchField.value)}})),searchField.addEventListener("focusout",(()=>{searchForm.classList.remove("active")}))};