"use strict";(self["webpackChunklac"]=self["webpackChunklac"]||[]).push([[548],{76:function(e,t,l){l.d(t,{k:function(){return a}});const a=(e,t=0)=>new Intl.NumberFormat("ru-RU",{minimumFractionDigits:t,maximumFractionDigits:t}).format("string"===typeof e?+e.replaceAll(/\s/g,"").replace(",","."):e).replace(",",".")},4008:function(e,t,l){l.d(t,{F:function(){return n}});var a=l(5420);const n=e=>({maxLength:a.BM.withMessage(`Максимальная длина ${e||1024} символов`,(0,a.BS)(e||1024))})},1411:function(e,t,l){l.d(t,{b:function(){return o}});var a=l(1020),n=l(3396),i=l(5845);const o=()=>{const e=(0,i.o)(),{windowWidth:t}=(0,a.Jk)(e),l=(0,n.Fl)((()=>t.value>=1024?"2col":"1col"));return{computedCols:l}}},5585:function(e,t,l){l.d(t,{G:function(){return m}});var a=l(4870),n=l(1735),i=l(6945),o=l(4008),r=l(2483),u=l(5845),s=l(1020),c=l(7321),d=l(4956),p=l(9152);const m=()=>{const e=(0,r.tv)(),t=(0,r.yj)(),{selectPartnerId:l}=(0,s.Jk)((0,p.N)()),{pointSubjects:m}=(0,s.Jk)((0,u.o)()),{setFieldRef:v,validateForm:h,resetValidations:f}=(0,n.Z)(),b=(0,a.iH)(!1),_=(0,a.qj)({name:{value:"",id:"name",label:"Наименование",rules:(0,i.v)()},address:{value:"",id:"address",label:"Адрес",rules:(0,i.v)(),val:""},subject_to_sell:{text:"Продает",checked:!1,value:"subject_to_sell",id:"subject_to_sell",children:[]},subject_to_buy:{text:"Закупает",checked:!0,value:"subject_to_buy",id:"subject_to_buy",label:"Тип",children:[]},region:{value:"",id:"region",label:"Регион"},district:{value:"",id:"district",label:"Район"},locality:{value:"",id:"locality",label:"Населенный пункт"},location:{value:"",id:"location",label:"Координаты",rules:(0,i.v)()},comment:{value:"",id:"comment",rules:(0,o.F)()},work_from:{label:"Время начала работы",value:"",id:"work_from",rules:(0,i.v)()},work_to:{label:"Время окончания работы",value:"",id:"work_to",rules:(0,i.v)()},operation_duration:{label:"Длительность операций",value:"",id:"operation_duration",rules:(0,i.v)()}}),y=()=>m.value?Object.entries(m.value).map((([e,t])=>({value:e,id:e,label:t.desc,val:t.val,checked:!1}))):[];async function w(){_.subject_to_sell.children=y(),_.subject_to_buy.children=y(),b.value=!0}async function g(e){_.subject_to_sell.children=y(),_.subject_to_sell.children.forEach((t=>{t.checked=e.subject_to_sell.some((e=>e===t.value))})),_.subject_to_buy.children=y(),_.subject_to_buy.children.forEach((t=>{t.checked=e.subject_to_buy.some((e=>e===t.value))})),_.name.value=e.name,_.address.value=e.address,_.location.value=e.location,_.work_from.value=e.work_from,_.work_to.value=e.work_to,_.operation_duration.value=String(e.operation_duration),e.region&&(_.region.value=e.region),e.district&&(_.district.value=e.district),e.locality&&(_.locality.value=e.locality),_.comment.value=e.comment||"",b.value=!0}function k(){const e={};if(Object.entries(_).forEach((([t,l])=>{l.value&&"subject_to_sell"!==t&&"subject_to_buy"!==t&&(e[t]=l.value)})),_.subject_to_buy.children&&_.subject_to_sell.children){const a=_.subject_to_buy.children.reduce(((e,t)=>e+(t.checked&&"number"===typeof t.val?t.val:0)),0),n=_.subject_to_sell.children.reduce(((e,t)=>e+(t.checked&&"number"===typeof t.val?t.val:0)),0);(a>0||n>0)&&(e.subject_to_sell=n,e.subject_to_buy=a),e.partner_id=t.query.partner_id||l.value}return e}function x(){Object.values(_).forEach((e=>e.value="")),f()}function C(){x(),e.back()}function j(e){_.name.value=e.name,_.comment.value=e.comment||""}async function $(e){const t=await(0,d.il)(e);return!t.error&&t.data.info?new c.q(t.data.info):null}async function F(){const e=await(0,d.KQ)(k());if(e.error)throw new Error("string"===typeof e.data?.info?e.data?.info:"Ошибка создания пункта");return e.data.info.point_id}async function Z(e){let t=!1;const l=await(0,d.VF)({...k(),point_id:e.point_id,partner_id:e.partner_id});if(l.error)throw t=!0,new Error("string"===typeof l.data?.info?l.data?.info:"Ошибка редактирования пункта");return t}return{fields:_,successCallback:C,prepareData:k,setFieldRef:v,validateForm:h,fillFromStore:j,init:w,isInit:b,createPoint:F,getPoint:$,initEdit:g,editPoint:Z}}},8445:function(e,t,l){l.d(t,{Z:function(){return y}});var a=l(3396),n=l(7139),i=l(9242);const o=e=>((0,a.dD)("data-v-3c4ff81c"),e=e(),(0,a.Cn)(),e),r={class:"lac-checkbox__custom mr8"},u={key:0,width:"11",height:"9",viewBox:"0 0 11 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s=o((()=>(0,a._)("path",{d:"M8.42731 0.781956C8.59855 0.60912 8.83124 0.511094 9.07453 0.509302C9.31782 0.50751 9.55193 0.602098 9.72569 0.772393C9.89946 0.942688 9.99875 1.17484 10.0019 1.41812C10.005 1.6614 9.91166 1.89602 9.74231 2.07071L4.84231 8.19633C4.75813 8.28696 4.65655 8.3597 4.54364 8.41021C4.43072 8.46071 4.30879 8.48794 4.18512 8.49028C4.06145 8.49261 3.93857 8.47 3.82384 8.42379C3.7091 8.37758 3.60485 8.30872 3.51731 8.22133L0.268559 4.97383C0.0959197 4.80111 -0.00103514 4.56688 -0.000976536 4.32267C-0.000917931 4.07847 0.0961493 3.84428 0.268872 3.67164C0.441594 3.499 0.675822 3.40205 0.92003 3.40211C1.16424 3.40217 1.39842 3.49923 1.57106 3.67196L4.14043 6.24196L8.40293 0.810706C8.41068 0.800824 8.41903 0.791431 8.42793 0.782581L8.42731 0.781956Z",fill:"white"},null,-1))),c=[s],d={key:1,width:"10",height:"3",viewBox:"0 0 10 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p=o((()=>(0,a._)("rect",{y:"0.5",width:"10",height:"2",rx:"1",fill:"white"},null,-1))),m=[p],v=["value","id","checked"],h={key:0,class:"lac-checkbox__label"};var f=(0,a.aZ)({__name:"LacCheckbox",props:{indeterminate:{type:Boolean,default:!1},checked:{type:Boolean},label:{},value:{},id:{}},emits:["update:checked","change"],setup(e,{emit:t}){const l=e,o=(0,a.Fl)({get(){return l.checked},set(){t("update:checked",!l.checked),t("change",!l.checked)}});return(e,t)=>((0,a.wg)(),(0,a.iD)("label",{class:(0,n.C_)(["lac-checkbox",{"mod-checked":e.indeterminate||e.checked}])},[(0,a._)("span",r,[!e.indeterminate&&e.checked?((0,a.wg)(),(0,a.iD)("svg",u,c)):(0,a.kq)("",!0),e.indeterminate?((0,a.wg)(),(0,a.iD)("svg",d,m)):(0,a.kq)("",!0)]),(0,a.wy)((0,a._)("input",{class:"visually-hidden",type:"checkbox",value:e.value,id:e.id,checked:e.checked,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},null,8,v),[[i.e8,o.value]]),e.label?((0,a.wg)(),(0,a.iD)("span",h,(0,n.zw)(e.label),1)):(0,a.kq)("",!0)],2))}}),b=l(89);const _=(0,b.Z)(f,[["__scopeId","data-v-3c4ff81c"]]);var y=_},2264:function(e,t,l){l.d(t,{Z:function(){return p}});var a=l(3396),n=l(9242),i=l(7139),o=l(5838),r=l(8445);const u={class:"w-100"},s={key:0,class:"mb8"};var c=(0,a.aZ)({__name:"LacCheckboxGroup",props:{checked:{type:Boolean,default:!1},id:{},value:{},label:{},text:{},children:{default:()=>[]},rules:{},errorMessage:{},flex:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},white:{type:Boolean,default:!1}},emits:["update:value"],setup(e,{emit:t}){const l=e,c=(0,a.Fl)((()=>!!l.children&&(l.children.some((e=>e.checked))&&l.children.some((e=>!e.checked))))),d=(0,a.Fl)((()=>!!l.children&&l.children.every((e=>e.checked))));function p(){c.value||!d.value?l.children.forEach((e=>e.checked=!0)):l.children.forEach((e=>e.checked=!1))}function m(e){const t=l.children.find((t=>t.id===e));t&&(t.checked=!t.checked)}(0,a.Fl)({get(){return l.value},set(e){t("update:value",e)}});const v=(0,a.Fl)((()=>{const e={"lac-checkbox-group__items":!0,"flex flex-wrap":l.flex,ml22:!l.flex,mt6:!l.white,"mod-white":l.white};return e}));return(e,t)=>((0,a.wg)(),(0,a.j4)(o.Z,(0,a.dG)({id:l.id,label:l.label},e.$attrs,{class:"lac-checkbox-group"}),{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a.wy)((0,a.Wm)(r.Z,{id:l.id,label:l.text,indeterminate:c.value,onChange:p,checked:d.value,value:l.value},null,8,["id","label","indeterminate","checked","value"]),[[n.F8,!e.plain]]),e.plain?((0,a.wg)(),(0,a.iD)("div",s,(0,i.zw)(l.text),1)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,i.C_)(v.value)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.children,((t,l)=>((0,a.wg)(),(0,a.j4)(r.Z,{key:t.id,id:t.id,value:t.value,label:t.label,onChange:e=>m(t.id),checked:t.checked,class:(0,i.C_)({ml8:l>0&&e.flex})},null,8,["id","value","label","onChange","checked","class"])))),128))],2)])])),_:1},16,["id","label"]))}});const d=c;var p=d},5881:function(e,t,l){l.d(t,{Z:function(){return d}});var a=l(3396),n=l(7139),i=l(5838),o=l(4870);const r={key:0,class:"lac-autocomplete__drop"},u=["onClick"];var s=(0,a.aZ)({__name:"LacAutocomplete",props:{label:{},placeholder:{},id:{},value:{},icon:{},rules:{},type:{},disabled:{type:Boolean},items:{}},emits:["update:value","change"],setup(e,{emit:t}){const l=e,s=(0,o.iH)(!1),c=(0,a.Fl)({get(){return l.value},set(e){s.value=!0,t("update:value",e)}});function d(e){c.value=e,s.value=!1,t("change")}return(e,t)=>{const o=(0,a.up)("InputText");return(0,a.wg)(),(0,a.j4)(i.Z,{id:l.id,label:l.label,class:"lac-autocomplete"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{type:e.type?e.type:"text",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),id:l.id,class:"w-100",placeholder:l.placeholder,disabled:e.disabled},null,8,["type","modelValue","id","placeholder","disabled"]),s.value&&e.items.length?((0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.items,((e,t)=>((0,a.wg)(),(0,a.iD)("span",{class:"lac-autocomplete__item",key:t,onClick:t=>d(e)},(0,n.zw)(e),9,u)))),128))])):(0,a.kq)("",!0)])),_:1},8,["id","label"])}}});const c=s;var d=c},3653:function(e,t,l){l.d(t,{Z:function(){return v}});var a=l(3396),n=l(7139),i=l(5838),o=l(4870),r=l(4219),u=l(76),s=l(3435);const c={class:"p-inputgroup flex-1"},d={class:"p-inputgroup-addon",style:{background:"#fafafa"}};var p=(0,a.aZ)({__name:"LacInputNumber",props:{label:{},placeholder:{},id:{},value:{},hidden:{},icon:{},rules:{},type:{},disabled:{type:Boolean},step:{default:1},min:{},max:{},afterDot:{},suffix:{},localePrettify:{type:Boolean}},emits:["update:value","focus","blur"],setup(e,{expose:t,emit:l}){const p=e,m=(0,s.p)(),v=((0,o.iH)(!1),(0,r.ZP)({props:{value:p.rules||{}}},{props:p})),h=(0,a.Fl)((()=>!!v.value.$errors.length)),f=(0,a.Fl)({get(){return p.value},set(e){l("update:value",e.replace(",","."))}});async function b(){const e=await v.value.$validate();return e||m.add({severity:"error",summary:p.label,detail:v.value.$errors[0].$message}),e}function _(){v.value.$reset()}async function y(e){await(0,a.Y3)(),window.removeEventListener("keyup",k),"base_price"===e&&l("blur",f.value),f.value=p.localePrettify?(0,u.k)(g(f.value),p.afterDot||0):g(f.value)}function w(e){"base_price"===e&&l("focus"),window.addEventListener("keyup",k)}function g(e){let t=Number(String(e).replace(/\s/g,"").replace(",","."));"number"===typeof p.max&&"number"===typeof p.min&&p.max===p.min?t=p.max:("number"===typeof p.max&&t>p.max&&(t=p.max),"number"===typeof p.min&&t<p.min&&(t=p.min));let l=Number.isNaN(t)?"0":"number"===typeof p.afterDot?t.toFixed(p.afterDot):String(t);return l}function k(e){38!==e.keyCode?40!==e.keyCode||j():C()}function x(e){return e.replace(",",".").split(".")}function C(){const e=g(f.value),t=x(e),l=p.afterDot||t[1]?t[1].length:0;let a="1";for(let o=0;o<l;o++)a+="0";const n=p.afterDot?Number(Number(e).toFixed(p.afterDot)):Number(e);let i=(n*Number(a)+p.step*Number(a))/Number(a);p.max&&i>p.max&&(i=p.max),f.value=g(String(i))}function j(){const e=g(f.value),t=x(e),l=p.afterDot||t[1]?t[1].length:0;let a="1";for(let o=0;o<l;o++)a+="0";const n=p.afterDot?Number(Number(e).toFixed(p.afterDot)):Number(e);let i=(n*Number(a)-p.step*Number(a))/Number(a);p.min&&i<p.min&&(i=p.min),f.value=g(String(i))}return t({validate:b,validationReset:_,id:p.id}),(e,t)=>{const l=(0,a.up)("InputText");return(0,a.wg)(),(0,a.j4)(i.Z,{id:p.id,label:p.label},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(l,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),id:p.id,class:(0,n.C_)(["w-100",{"p-invalid":h.value}]),placeholder:p.placeholder,disabled:e.disabled,onFocus:t[1]||(t[1]=e=>w(p.id)),onBlur:t[2]||(t[2]=e=>y(p.id))},null,8,["modelValue","id","class","placeholder","disabled"]),(0,a._)("span",d,(0,n.zw)(p.suffix),1)])])),_:1},8,["id","label"])}}});const m=p;var v=m},6144:function(e,t,l){l.d(t,{Z:function(){return d}});var a=l(3396),n=l(7139),i=l(5838),o=l(4870),r=l(4219),u=l(3435),s=(0,a.aZ)({__name:"LacInputText",props:{label:{},placeholder:{},id:{},value:{},icon:{},rules:{},type:{},labelPosition:{},disabled:{type:Boolean}},emits:["update:value"],setup(e,{expose:t,emit:l}){const s=e,c=(0,u.p)(),d=((0,o.iH)(!1),(0,r.ZP)({props:{value:s.rules||{}}},{props:s})),p=(0,a.Fl)((()=>!!d.value.$errors.length)),m=(0,a.Fl)({get(){return s.value},set(e){l("update:value",e)}});async function v(){const e=await d.value.$validate();return e||c.add({severity:"error",summary:s.label,detail:d.value.$errors[0].$message}),e}function h(){d.value.$reset()}return t({validate:v,validationReset:h,id:s.id}),(e,t)=>{const l=(0,a.up)("InputText");return(0,a.wg)(),(0,a.j4)(i.Z,{id:s.id,label:s.label,labelPosition:s.labelPosition},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),id:s.id,placeholder:s.placeholder,type:e.type?e.type:"text",disabled:e.disabled,class:(0,n.C_)(["w-full",{"p-invalid":p.value}]),onBlur:t[1]||(t[1]=t=>e.$emit("blur",e.event))},null,8,["modelValue","id","placeholder","type","disabled","class"])])),_:1},8,["id","label","labelPosition"])}}});const c=s;var d=c},9546:function(e,t,l){l.d(t,{Z:function(){return g}});var a=l(3396),n=l(4870),i=l(7139),o=l(5838),r=l(4219),u=l(56),s=l(3412),c="\n.p-inputtextarea-resizable {\n    overflow: hidden;\n    resize: none;\n}\n\n.p-fluid .p-inputtextarea {\n    width: 100%;\n}\n",d={root:function(e){var t=e.instance,l=e.props;return["p-inputtextarea p-inputtext p-component",{"p-filled":t.filled,"p-inputtextarea-resizable ":l.autoResize}]}},p=(0,s.X)(c,{name:"textarea",manual:!0}),m=p.load,v={name:"BaseTextarea",extends:u.Z,props:{modelValue:null,autoResize:Boolean},css:{classes:d,loadStyle:m},provide:function(){return{$parentInstance:this}}},h={name:"Textarea",extends:v,emits:["update:modelValue"],mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){var e=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height="calc(".concat(e.borderTopWidth," + ").concat(e.borderBottomWidth," + ").concat(this.$el.scrollHeight,"px)"),parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||""===this.$attrs.disabled}}}}},f=["value"];function b(e,t,l,n,i,o){return(0,a.wg)(),(0,a.iD)("textarea",(0,a.dG)({class:e.cx("root"),value:e.modelValue,onInput:t[0]||(t[0]=function(){return o.onInput&&o.onInput.apply(o,arguments)})},e.ptm("root",o.ptmParams),{"data-pc-name":"textarea"}),null,16,f)}h.render=b;var _=l(3435),y=(0,a.aZ)({__name:"LacTextarea",props:{label:{default:""},placeholder:{},noResize:{type:Boolean},rows:{},id:{},value:{},icon:{},labelPosition:{},rules:{},disabled:{type:Boolean}},emits:["update:value"],setup(e,{expose:t,emit:l}){const u=e,s=(0,_.p)(),c=((0,n.iH)(!1),(0,r.ZP)({props:{value:u.rules||{}}},{props:u})),d=(0,a.Fl)((()=>!!c.value.$errors.length)),p=(0,a.Fl)({get(){return u.value},set(e){l("update:value",e)}});async function m(){const e=await c.value.$validate();return e||s.add({severity:"error",summary:u.label,detail:c.value.$errors[0].$message}),e}function v(){c.value.$reset()}return t({validate:m,validationReset:v,id:u.id}),(e,t)=>((0,a.wg)(),(0,a.j4)(o.Z,{id:u.id,label:u.label,labelPosition:u.labelPosition},{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(h),{autoResize:"",id:u.id,class:(0,i.C_)(["w-full",{"p-invalid":d.value}]),modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),"no-resize":u.noResize,rows:u.rows,placeholder:u.placeholder,disabled:e.disabled},null,8,["id","class","modelValue","no-resize","rows","placeholder","disabled"])])),_:1},8,["id","label","labelPosition"]))}});const w=y;var g=w},2793:function(e,t,l){l.d(t,{Z:function(){return d}});var a=l(3396),n=l(7139),i=l(1839);const o={class:"form-template"},r={class:"form-template__header mb30"},u={class:"form-template__main"};var s=(0,a.aZ)({__name:"FormTemplate",props:{title:{},stretch:{type:Boolean},maxWidth:{}},setup(e){const t=e,l=(0,a.Fl)((()=>{const e={};return void 0!==t.maxWidth&&(e.maxWidth=t.maxWidth+"px"),e}));async function s(){await i.Z.back()}return(e,i)=>{const c=(0,a.up)("Toast"),d=(0,a.up)("Button");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c),(0,a._)("div",{class:(0,n.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,n.j5)(l.value)},[(0,a._)("header",r,[(0,a.Uk)((0,n.zw)(t.title)+" ",1),(0,a.Wm)(d,{onClick:s,icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",class:"border-none"})])],6),(0,a._)("div",{class:(0,n.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,n.j5)(l.value)},[(0,a._)("div",u,[(0,a.WI)(e.$slots,"default")])],6)])}}});const c=s;var d=c}}]);
//# sourceMappingURL=548.f8fd4845.js.map