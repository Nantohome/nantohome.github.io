"use strict";(self["webpackChunklac"]=self["webpackChunklac"]||[]).push([[930],{828:function(e,t,a){a.d(t,{Zs:function(){return i},kI:function(){return o},oU:function(){return s},vU:function(){return l}});var n=a(7542),r=a(8020);const l=async e=>{const t=await(0,n.I)().get("/agent/role/delete",{searchParams:{role:e}});if(!t)throw new r.u(l.name);return t},o=async(e={})=>{const t=await(0,n.I)().get("/agent/role/list",{searchParams:{...e,size:30}});if(!t)throw new r.u(o.name);return t},i=async e=>{const t=await(0,n.I)().post("/agent/role/add",e);if(!t)throw new r.u(i.name);return t},s=async(e,t)=>{const a=await(0,n.I)().post("/agent/role/edit",{old_role:e,new_role:t});if(!a)throw new r.u(s.name);return a}},4436:function(e,t,a){a.d(t,{U:function(){return i}});var n,r=a(3396);(function(e){e[e["MOBILE"]=375]="MOBILE",e[e["TABLET"]=768]="TABLET",e[e["NOTEBOOK"]=1024]="NOTEBOOK",e[e["DESKTOP"]=1440]="DESKTOP"})(n||(n={}));var l=a(1020),o=a(5845);const i=()=>{const{windowWidth:e}=(0,l.Jk)((0,o.o)()),t=(0,r.Fl)((()=>e.value>=n.TABLET?"horizontal":"vertical"));return{fieldVariant:t}}},1411:function(e,t,a){a.d(t,{b:function(){return o}});var n=a(1020),r=a(3396),l=a(5845);const o=()=>{const e=(0,l.o)(),{windowWidth:t}=(0,n.Jk)(e),a=(0,r.Fl)((()=>t.value>=1024?"2col":"1col"));return{computedCols:a}}},9618:function(e,t,a){a.d(t,{j:function(){return l}});var n=a(4870),r=a(6945);const l=()=>{const e=(0,n.qj)({name:{value:"",id:"role",label:"Наименование",rules:(0,r.v)()}});return{fields:e}}},5920:function(e,t,a){a.d(t,{I:function(){return n}});const n=e=>{function t(){const t={role:e.name.value};return t}return{prepareData:t}}},890:function(e,t,a){a.d(t,{S:function(){return l}});var n=a(9286),r=a(3856);const l=()=>{const e=(0,n.N)();function t(t){return async()=>{try{e.open(r.y.LOADER),await t(),e.close()}catch(a){e.open(r.y.ERROR,{text:a.message})}}}return{initTemplate:t}}},354:function(e,t,a){a.d(t,{e:function(){return o}});var n=a(9286),r=a(3856),l=a(2483);const o=e=>{const t=(0,n.N)(),a=(0,l.tv)();function o(n,l){return async()=>{if(await e())try{t.open(r.y.LOADER),await n(),!l&&t.open(r.y.SUCCESS,{callback:()=>a.back()})}catch(o){t.open(r.y.ERROR,{text:o.message})}}}return{submitTemplate:o}}},140:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(3396),r=a(7139);const l={class:"lac-fieldset"};var o=(0,n.aZ)({__name:"LacFieldset",props:{title:{},grid:{},gapRow:{},gapCol:{}},setup(e){const t=e,a=(0,n.Fl)((()=>["lac-fieldset__grid","2col"===t.grid?"mod-2col":""])),o=(0,n.Fl)((()=>`\n  ${"number"===typeof t.gapRow?"grid-row-gap: "+t.gapRow+"px":""}\n  ${"number"===typeof t.gapCol?"grid-column-gap: "+t.gapCol+"px":""}\n  `));return(e,i)=>((0,n.wg)(),(0,n.iD)("fieldset",l,[t.title?((0,n.wg)(),(0,n.iD)("legend",(0,r.vs)((0,n.dG)({key:0},e.$attrs)),(0,r.zw)(t.title),17)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,r.C_)(a.value),style:(0,r.j5)(o.value)},[(0,n.WI)(e.$slots,"default")],6)]))}});const i=o;var s=i},6144:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(3396),r=a(7139),l=a(5838),o=a(4870),i=a(4219),s=a(3435),u=(0,n.aZ)({__name:"LacInputText",props:{label:{},placeholder:{},id:{},value:{},icon:{},rules:{},type:{},labelPosition:{},disabled:{type:Boolean}},emits:["update:value"],setup(e,{expose:t,emit:a}){const u=e,c=(0,s.p)(),d=((0,o.iH)(!1),(0,i.ZP)({props:{value:u.rules||{}}},{props:u})),p=(0,n.Fl)((()=>!!d.value.$errors.length)),m=(0,n.Fl)({get(){return u.value},set(e){a("update:value",e)}});async function f(){const e=await d.value.$validate();return e||c.add({severity:"error",summary:u.label,detail:d.value.$errors[0].$message}),e}function v(){d.value.$reset()}return t({validate:f,validationReset:v,id:u.id}),(e,t)=>{const a=(0,n.up)("InputText");return(0,n.wg)(),(0,n.j4)(l.Z,{id:u.id,label:u.label,labelPosition:u.labelPosition},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),id:u.id,placeholder:u.placeholder,type:e.type?e.type:"text",disabled:e.disabled,class:(0,r.C_)(["w-full",{"p-invalid":p.value}]),onBlur:t[1]||(t[1]=t=>e.$emit("blur",e.event))},null,8,["modelValue","id","placeholder","type","disabled","class"])])),_:1},8,["id","label","labelPosition"])}}});const c=u;var d=c},3717:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var n=a(3396),r=a(2793),l=a(4870),o=a(9242),i=a(140),s=a(6144),u=a(1411),c=a(4436),d=a(9286),p=a(1735),m=a(354),f=a(890),v=a(9618),w=a(5920),b=a(828);const y=()=>{const{setFieldRef:e,validateForm:t,resetValidations:a}=(0,p.Z)(),n=(0,l.iH)(!1),{fields:r}=(0,v.j)(),{prepareData:o}=(0,w.I)(r),{submitTemplate:i}=(0,m.e)(t),{initTemplate:s}=(0,f.S)();async function u(){n.value=!0}async function c(){const e=o(),t=await(0,b.Zs)(e);if(t.error)throw new Error(t.data.info?JSON.stringify(t.data.info,null,2):"Не удалось создать роль")}return{setFieldRef:e,validateForm:t,resetValidations:a,fields:r,init:s(u),submit:i(c),isInit:n}},g=["onSubmit"];var _=(0,n.aZ)({__name:"LacRoleCreateForm",setup(e){const{setFieldRef:t,validateForm:a,resetValidations:r,fields:p,init:m,isInit:f,submit:v}=y(),{fieldVariant:w}=((0,d.N)(),(0,c.U)()),{computedCols:b}=(0,u.b)();async function _(){await v()}return(0,n.bv)(m),(e,a)=>{const r=(0,n.up)("Button");return(0,l.SU)(f)?((0,n.wg)(),(0,n.iD)("form",{key:0,class:"lac-form",onSubmit:(0,o.iM)(_,["prevent"])},[(0,n.Wm)(i.Z,{class:"mb16",grid:(0,l.SU)(b)},{default:(0,n.w5)((()=>[(0,n.Wm)(s.Z,{variant:(0,l.SU)(w),value:(0,l.SU)(p).name.value,"onUpdate:value":a[0]||(a[0]=e=>(0,l.SU)(p).name.value=e),id:(0,l.SU)(p).name.id,label:(0,l.SU)(p).name.label,rules:(0,l.SU)(p).name.rules,placeholder:"",ref:(0,l.SU)(t)},null,8,["variant","value","id","label","rules"])])),_:1},8,["grid"]),(0,n.Wm)(r,{type:"submit",label:"Добавить"})],40,g)):(0,n.kq)("",!0)}}});const h=_;var S=h,T=(0,n.aZ)({__name:"AdminRoleCreatePage",setup(e){return(e,t)=>((0,n.wg)(),(0,n.j4)(r.Z,{title:"Добавление должности"},{default:(0,n.w5)((()=>[(0,n.Wm)(S)])),_:1}))}});const R=T;var U=R},2793:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(3396),r=a(7139),l=a(1839);const o={class:"form-template"},i={class:"form-template__header mb30"},s={class:"form-template__main"};var u=(0,n.aZ)({__name:"FormTemplate",props:{title:{},stretch:{type:Boolean},maxWidth:{}},setup(e){const t=e,a=(0,n.Fl)((()=>{const e={};return void 0!==t.maxWidth&&(e.maxWidth=t.maxWidth+"px"),e}));async function u(){await l.Z.back()}return(e,l)=>{const c=(0,n.up)("Toast"),d=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(c),(0,n._)("div",{class:(0,r.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,r.j5)(a.value)},[(0,n._)("header",i,[(0,n.Uk)((0,r.zw)(t.title)+" ",1),(0,n.Wm)(d,{onClick:u,icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",class:"border-none"})])],6),(0,n._)("div",{class:(0,r.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,r.j5)(a.value)},[(0,n._)("div",s,[(0,n.WI)(e.$slots,"default")])],6)])}}});const c=u;var d=c}}]);
//# sourceMappingURL=adminRoleCreate.4198f489.js.map