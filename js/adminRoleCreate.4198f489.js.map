{"version":3,"file":"js/adminRoleCreate.4198f489.js","mappings":"qOAKO,MAAMA,EAAqBC,UAGhC,MAAMC,QAAYC,EAAAA,EAAAA,KAAUC,IAC1B,qBACA,CACEC,aAAc,CACZC,UAKN,IAAKJ,EACH,MAAM,IAAIK,EAAAA,EAAoBP,EAAmBQ,MAGnD,OAAON,CAAG,EAGCO,EAAmBR,MAC9BS,EAAoC,CAAC,KAErC,MAAMR,QAAYC,EAAAA,EAAAA,KAAUC,IAC1B,mBACA,CAAEC,aAAc,IAAKK,EAAQC,KAAM,MAGrC,IAAKT,EACH,MAAM,IAAIK,EAAAA,EAAoBE,EAAiBD,MAGjD,OAAON,CAAG,EAGCU,EAAmBX,UAG9B,MAAMC,QAAYC,EAAAA,EAAAA,KAAUU,KAC1B,kBACAC,GAGF,IAAKZ,EACH,MAAM,IAAIK,EAAAA,EAAoBK,EAAiBJ,MAGjD,OAAON,CAAG,EAGCa,EAAoBd,MAC/Be,EACAC,KAEA,MAAMf,QAAYC,EAAAA,EAAAA,KAAUU,KAC1B,mBACA,CACEK,SAAUF,EACVG,SAAUF,IAId,IAAKf,EACH,MAAM,IAAIK,EAAAA,EAAoBQ,EAAkBP,MAGlD,OAAON,CAAG,C,2DCtEAkB,E,WAAZ,SAAYA,GACVA,EAAAA,EAAA,wBACAA,EAAAA,EAAA,wBACAA,EAAAA,EAAA,6BACAA,EAAAA,EAAA,0BACD,EALD,CAAYA,IAAAA,EAAW,K,wBCKhB,MAAMC,EAAkBA,KAC7B,MAAM,YAAEC,IAAgBC,EAAAA,EAAAA,KAAYC,EAAAA,EAAAA,MAC9BC,GAAeC,EAAAA,EAAAA,KAAS,IACrBJ,EAAYK,OAASP,EAAYQ,OAAS,aAAe,aAElE,MAAO,CACLH,eACD,C,yFCRI,MAAMI,EAAkBA,KAC7B,MAAMC,GAAQN,EAAAA,EAAAA,MACR,YAAEF,IAAgBC,EAAAA,EAAAA,IAAYO,GAE9BC,GAAeL,EAAAA,EAAAA,KAAS,IACrBJ,EAAYK,OAAS,KAAO,OAAS,SAG9C,MAAO,CAAEI,eAAc,C,+ECHlB,MAAMC,EAAYA,KACvB,MAAMC,GAAyBC,EAAAA,EAAAA,IAAS,CACtC1B,KAAM,CACJmB,MAAO,GACPQ,GAAI,OACJC,MAAO,eACPC,OAAOC,EAAAA,EAAAA,QAIX,MAAO,CACLL,SACD,C,uDClBI,MAAMM,EAAkBN,IAC7B,SAASO,IACP,MAAMtC,EAAmB,CACvBI,KAAM2B,EAAOzB,KAAKmB,OAEpB,OAAOzB,CACT,CAEA,MAAO,CAAEsC,cAAa,C,8ECRjB,MAAMC,EAAkBA,KAC7B,MAAMC,GAASC,EAAAA,EAAAA,KAEf,SAASC,EAAaC,GACpB,OAAO5C,UACL,IACEyC,EAAOI,KAAKC,EAAAA,EAAoBC,cAC1BH,IACNH,EAAOO,O,CACP,MAAOC,GACPR,EAAOI,KAAKC,EAAAA,EAAoBI,MAAO,CACrCC,KAAOF,EAAiBG,S,EAIhC,CAEA,MAAO,CAAET,eAAc,C,wFChBlB,MAAMU,EAAqBC,IAChC,MAAMb,GAASC,EAAAA,EAAAA,KACTa,GAASC,EAAAA,EAAAA,MAEf,SAASC,EACPb,EACAc,GAEA,OAAO1D,UACL,SAAUsD,IACR,IACEb,EAAOI,KAAKC,EAAAA,EAAoBC,cAC1BH,KACLc,GACCjB,EAAOI,KAAKC,EAAAA,EAAoBa,QAAS,CACvCf,SAAUA,IAAMW,EAAOK,Q,CAE3B,MAAOX,GACPR,EAAOI,KAAKC,EAAAA,EAAoBI,MAAO,CACrCC,KAAOF,EAAiBG,S,EAKlC,CAEA,MAAO,CAAEK,iBAAgB,C,8EC3B3B,MAAMI,EAAa,CAAEC,MAAO,gBAK5B,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,cACRC,MAAO,CACLC,MAAO,CAAC,EACRC,KAAM,CAAC,EACPC,OAAQ,CAAC,EACTC,OAAQ,CAAC,GAEXC,KAAAA,CAAMC,GAER,MAAMN,EAAQM,EAIRC,GAAa/C,EAAAA,EAAAA,KAAS,IAAM,CAChC,qBACe,SAAfwC,EAAME,KAAkB,WAAa,MAGjCM,GAAYhD,EAAAA,EAAAA,KAAS,IAClB,OAEmB,kBAAjBwC,EAAMG,OACT,iBAAmBH,EAAMG,OAAS,KAClC,SAGoB,kBAAjBH,EAAMI,OACT,oBAAsBJ,EAAMI,OAAS,KACrC,WAKR,MAAO,CAACK,EAAUC,MACRC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,WAAYhB,EAAY,CAC/DI,EAAMC,QACFU,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,UAAUC,EAAAA,EAAAA,KAAgBC,EAAAA,EAAAA,IAAY,CAAEC,IAAK,GAAKN,EAAKO,UAAUC,EAAAA,EAAAA,IAAiBjB,EAAMC,OAAQ,MACnIiB,EAAAA,EAAAA,IAAoB,IAAI,IAC5BC,EAAAA,EAAAA,GAAoB,MAAO,CACzBtB,OAAOuB,EAAAA,EAAAA,IAAgBb,EAAW9C,OAClC4D,OAAOC,EAAAA,EAAAA,IAAgBd,EAAU/C,QAChC,EACD8D,EAAAA,EAAAA,IAAYd,EAAKe,OAAQ,YACxB,KAGP,IClDA,MAAMC,EAAc,EAEpB,O,uHCeA,GAA4B3B,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,eACRC,MAAO,CACL9B,MAAO,CAAC,EACRwD,YAAa,CAAC,EACdzD,GAAI,CAAC,EACLR,MAAO,CAAC,EACRkE,KAAM,CAAC,EACPxD,MAAO,CAAC,EACRyD,KAAM,CAAC,EACPC,cAAe,CAAC,EAChBC,SAAU,CAAEF,KAAMG,UAEpBC,MAAO,CAAC,gBACR3B,KAAAA,CAAMC,GAAgB2B,OAAQC,EAAQ,KAAEC,IAE1C,MAAMnC,EAAQM,EAER8B,GAAQC,EAAAA,EAAAA,KAKRC,IAFSC,EAAAA,EAAAA,KAAI,IAERC,EAAAA,EAAAA,IACT,CAAExC,MAAO,CAAEvC,MAAOuC,EAAM7B,OAAS,CAAC,IAClC,CACE6B,WAIEyC,GAAkBjF,EAAAA,EAAAA,KAAS,MAC/B8E,EAAG7E,MAAMiF,QAAQC,SAKblF,GAAQD,EAAAA,EAAAA,IAAS,CACrBtB,GAAAA,GACE,OAAO8D,EAAMvC,KACf,EACAmF,GAAAA,CAAInF,GACF0E,EAAK,eAAgB1E,EACvB,IAGF1B,eAAe8G,IACb,MAAMC,QAAgBR,EAAG7E,MAAMsF,YAQ/B,OAPKD,GACHV,EAAMY,IAAI,CACRC,SAAU,QACVC,QAASlD,EAAM9B,MACfiF,OAAQb,EAAG7E,MAAMiF,QAAQ,GAAGU,WAGzBN,CACT,CAEA,SAASO,IACPf,EAAG7E,MAAM6F,QACX,CAIA,OAFApB,EAAoB,CAAEW,WAAUQ,kBAAiBpF,GAAI+B,EAAM/B,KAEpD,CAACwC,EAAUC,KAChB,MAAM6C,GAAuBC,EAAAA,EAAAA,IAAkB,aAE/C,OAAQ7C,EAAAA,EAAAA,OAAc8C,EAAAA,EAAAA,IAAaC,EAAAA,EAAU,CAC3CzF,GAAI+B,EAAM/B,GACVC,MAAO8B,EAAM9B,MACb2D,cAAe7B,EAAM6B,eACpB,CACD8B,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAaN,EAAsB,CACjCO,WAAYrG,EAAMA,MAClB,sBAAuBiD,EAAO,KAAOA,EAAO,GAAMqD,GAAkBtG,EAAOA,MAAQsG,GACnF9F,GAAI+B,EAAM/B,GACVyD,YAAa1B,EAAM0B,YACnBE,KAAMnB,EAAKmB,KAAOnB,EAAKmB,KAAO,OAC9BE,SAAUrB,EAAKqB,SACfjC,OAAOuB,EAAAA,EAAAA,IAAgB,CAAC,SAAU,CAAE,YAAaqB,EAAgBhF,SACjEuG,OAAQtD,EAAO,KAAOA,EAAO,GAAMqD,GAAiBtD,EAAKwD,MAAM,OAAQxD,EAAKyD,SAC3E,KAAM,EAAG,CAAC,aAAc,KAAM,cAAe,OAAQ,WAAY,aAEtEC,EAAG,GACF,EAAG,CAAC,KAAM,QAAS,iBAAiB,CAEzC,ICzGA,MAAM1C,EAAc,EAEpB,O,0NCOO,MAAM2C,EACXA,KACE,MAAM,YAAEC,EAAW,aAAEhF,EAAY,iBAAEiF,IAAqBC,EAAAA,EAAAA,KAClDC,GAASjC,EAAAA,EAAAA,KAAI,IAEb,OAAExE,IAAWD,EAAAA,EAAAA,MACb,YAAEQ,IAAgBD,EAAAA,EAAAA,GAAeN,IACjC,eAAEyB,IAAmBJ,EAAAA,EAAAA,GAAkBC,IACvC,aAAEX,IAAiBH,EAAAA,EAAAA,KAEzBxC,eAAe0I,IACbD,EAAO/G,OAAQ,CACjB,CAEA1B,eAAe2I,IACb,MAAM9H,EAAU0B,IACVtC,QAAYU,EAAAA,EAAAA,IAAiBE,GAEnC,GAAIZ,EAAI2I,MACN,MAAM,IAAIC,MACR5I,EAAI6I,KAAKC,KACLC,KAAKC,UAAUhJ,EAAI6I,KAAKC,KAAM,KAAM,GACpC,0BAGV,CAEA,MAAO,CACLT,cACAhF,eACAiF,mBACAvG,SACA0G,KAAM/F,EAAa+F,GACnBC,OAAQlF,EAAekF,GACvBF,SACD,EC5CC5E,EAAa,CAAC,YAapB,OAA4BE,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,oBACRM,KAAAA,CAAMC,GAER,MAAM,YACJ+D,EAAW,aACXhF,EAAY,iBACZiF,EAAgB,OAChBvG,EAAM,KACN0G,EAAI,OACJD,EAAM,OACNE,GACEN,KAGE,aAAE7G,KADOkB,EAAAA,EAAAA,MACUtB,EAAAA,EAAAA,OACnB,aAAEU,IAAiBF,EAAAA,EAAAA,KAEzB5B,eAAekJ,UACPP,GACR,CAGA,OAFAQ,EAAAA,EAAAA,IAAUT,GAEH,CAAChE,EAAUC,KAChB,MAAMyE,GAAoB3B,EAAAA,EAAAA,IAAkB,UAE5C,OAAQ4B,EAAAA,EAAAA,IAAOZ,KACV7D,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ,CACzCG,IAAK,EACLlB,MAAO,WACPoF,UAAUI,EAAAA,EAAAA,IAAeJ,EAAU,CAAC,aACnC,EACDpB,EAAAA,EAAAA,IAAayB,EAAAA,EAAa,CACxBzF,MAAO,OACPK,MAAMkF,EAAAA,EAAAA,IAAOvH,IACZ,CACD8F,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAa0B,EAAAA,EAAc,CACzBC,SAASJ,EAAAA,EAAAA,IAAO7H,GAChBE,OAAO2H,EAAAA,EAAAA,IAAOrH,GAAQzB,KAAKmB,MAC3B,iBAAkBiD,EAAO,KAAOA,EAAO,GAAMqD,IAAkBqB,EAAAA,EAAAA,IAAOrH,GAAQzB,KAAKmB,MAASsG,GAC5F9F,IAAImH,EAAAA,EAAAA,IAAOrH,GAAQzB,KAAK2B,GACxBC,OAAOkH,EAAAA,EAAAA,IAAOrH,GAAQzB,KAAK4B,MAC3BC,OAAOiH,EAAAA,EAAAA,IAAOrH,GAAQzB,KAAK6B,MAC3BuD,YAAa,GACba,KAAK6C,EAAAA,EAAAA,IAAOf,IACX,KAAM,EAAG,CAAC,UAAW,QAAS,KAAM,QAAS,aAElDF,EAAG,GACF,EAAG,CAAC,UACPN,EAAAA,EAAAA,IAAasB,EAAmB,CAC9BvD,KAAM,SACN1D,MAAO,cAER,GAAI0B,KACPsB,EAAAA,EAAAA,IAAoB,IAAI,EAAK,CAEnC,ICtEA,MAAMO,EAAc,EAEpB,QCCA,GAA4B3B,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,sBACRM,KAAAA,CAAMC,GAGR,MAAO,CAACG,EAAUC,MACRC,EAAAA,EAAAA,OAAc8C,EAAAA,EAAAA,IAAagC,EAAAA,EAAc,CAAExF,MAAO,wBAA0B,CAClF0D,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAa6B,MAEfvB,EAAG,IAGP,IChBA,MAAM,EAAc,EAEpB,O,yFCFA,MAAMvE,EAAa,CAAEC,MAAO,iBACtB8F,EAAa,CAAE9F,MAAO,8BACtB+F,EAAa,CAAE/F,MAAO,uBAM5B,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,eACRC,MAAO,CACLC,MAAO,CAAC,EACR4F,QAAS,CAAEjE,KAAMG,SACjB+D,SAAU,CAAC,GAEbzF,KAAAA,CAAMC,GAER,MAAMN,EAAQM,EAIRyF,GAAiBvI,EAAAA,EAAAA,KAAS,KAC9B,MAAMxB,EAA8B,CAAC,EAMrC,YAJuBgK,IAAnBhG,EAAM8F,WACR9J,EAAI8J,SAAW9F,EAAM8F,SAAW,MAG3B9J,CAAG,IAGZD,eAAekK,UACP3G,EAAAA,EAAOK,MACf,CAEA,MAAO,CAACc,EAAUC,KAChB,MAAMwF,GAAmB1C,EAAAA,EAAAA,IAAkB,SACrC2B,GAAoB3B,EAAAA,EAAAA,IAAkB,UAE5C,OAAQ7C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOhB,EAAY,EAC3DiE,EAAAA,EAAAA,IAAaqC,IACb/E,EAAAA,EAAAA,GAAoB,MAAO,CACzBtB,OAAOuB,EAAAA,EAAAA,IAAgB,CAAC,2BAA4B,CAAE,cAAeX,EAAKoF,WAC1ExE,OAAOC,EAAAA,EAAAA,IAAgByE,EAAetI,QACrC,EACD0D,EAAAA,EAAAA,GAAoB,SAAUwE,EAAY,EACxCQ,EAAAA,EAAAA,KAAiBlF,EAAAA,EAAAA,IAAiBjB,EAAMC,OAAS,IAAK,IACtD4D,EAAAA,EAAAA,IAAasB,EAAmB,CAC9BiB,QAASH,EACTtE,KAAM,cACN0E,QAAS,GACTC,SAAU,GACVrD,SAAU,SACVpD,MAAO,mBAGV,IACHsB,EAAAA,EAAAA,GAAoB,MAAO,CACzBtB,OAAOuB,EAAAA,EAAAA,IAAgB,CAAC,2BAA4B,CAAE,cAAeX,EAAKoF,WAC1ExE,OAAOC,EAAAA,EAAAA,IAAgByE,EAAetI,QACrC,EACD0D,EAAAA,EAAAA,GAAoB,MAAOyE,EAAY,EACrCrE,EAAAA,EAAAA,IAAYd,EAAKe,OAAQ,cAE1B,IACH,CAEJ,ICjEA,MAAMC,EAAc,EAEpB,O","sources":["webpack://lac/./src/kernel/api/methods/AgentRole.ts","webpack://lac/./src/kernel/constants/Breakpoints.ts","webpack://lac/./src/views/components/form/field/useFieldVariant.ts","webpack://lac/./src/views/components/form/field/useFieldsetCols.ts","webpack://lac/./src/views/modules/CrudForms/LacRoleForm/use/useFields.ts","webpack://lac/./src/views/modules/CrudForms/LacRoleForm/use/usePrepareData.ts","webpack://lac/./src/views/modules/CrudForms/use/useInitTemplate.ts","webpack://lac/./src/views/modules/CrudForms/use/useSubmitTemplate.ts","webpack://lac/./src/views/components/form/field/LacFieldset.vue?7707","webpack://lac/./src/views/components/form/field/LacFieldset.vue","webpack://lac/./src/views/components/form/input/LacInputText.vue?57e6","webpack://lac/./src/views/components/form/input/LacInputText.vue","webpack://lac/./src/views/modules/CrudForms/LacRoleForm/use/useRoleCreateForm.ts","webpack://lac/./src/views/modules/CrudForms/LacRoleForm/LacRoleCreateForm.vue?dcb1","webpack://lac/./src/views/modules/CrudForms/LacRoleForm/LacRoleCreateForm.vue","webpack://lac/./src/views/pages/admin/AdminRoleCreatePage.vue?03f4","webpack://lac/./src/views/pages/admin/AdminRoleCreatePage.vue","webpack://lac/./src/views/templates/FormTemplate/FormTemplate.vue?3c48","webpack://lac/./src/views/templates/FormTemplate/FormTemplate.vue"],"sourcesContent":["import { getHttp } from \"@/kernel/api/http\";\r\nimport { ApiResponseType, ApiRequestListOptionsType } from \"@/kernel/api/types\";\r\nimport { NotRequestException } from \"@/kernel/lib/exceptions/not-request.exception\";\r\nimport { RoleAddData } from \"@/kernel/api/dto/AgentRole\";\r\n\r\nexport const getAgentRoleDelete = async (\r\n  role: string\r\n): Promise<ApiResponseType> => {\r\n  const res = await getHttp().get<ApiResponseType | false>(\r\n    \"/agent/role/delete\",\r\n    {\r\n      searchParams: {\r\n        role,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!res) {\r\n    throw new NotRequestException(getAgentRoleDelete.name);\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nexport const getAgentRoleList = async (\r\n  params: ApiRequestListOptionsType = {}\r\n): Promise<ApiResponseType<string[]>> => {\r\n  const res = await getHttp().get<ApiResponseType<string[]> | false>(\r\n    \"/agent/role/list\",\r\n    { searchParams: { ...params, size: 30 } }\r\n  );\r\n\r\n  if (!res) {\r\n    throw new NotRequestException(getAgentRoleList.name);\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nexport const postAgentRoleAdd = async (\r\n  payload: RoleAddData\r\n): Promise<ApiResponseType> => {\r\n  const res = await getHttp().post<ApiResponseType | false>(\r\n    \"/agent/role/add\",\r\n    payload\r\n  );\r\n\r\n  if (!res) {\r\n    throw new NotRequestException(postAgentRoleAdd.name);\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nexport const postAgentRoleEdit = async (\r\n  oldRole: string,\r\n  newRole: string\r\n): Promise<ApiResponseType> => {\r\n  const res = await getHttp().post<ApiResponseType | false>(\r\n    \"/agent/role/edit\",\r\n    {\r\n      old_role: oldRole,\r\n      new_role: newRole,\r\n    }\r\n  );\r\n\r\n  if (!res) {\r\n    throw new NotRequestException(postAgentRoleEdit.name);\r\n  }\r\n\r\n  return res;\r\n};\r\n","export enum BREAKPOINTS {\r\n  MOBILE = 375,\r\n  TABLET = 768,\r\n  NOTEBOOK = 1024,\r\n  DESKTOP = 1440,\r\n}\r\n","import { computed } from \"vue\";\r\nimport { BREAKPOINTS } from \"@/kernel/constants/Breakpoints\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useStore } from \"@/store\";\r\n\r\nexport const useFieldVariant = () => {\r\n  const { windowWidth } = storeToRefs(useStore());\r\n  const fieldVariant = computed(() => {\r\n    return windowWidth.value >= BREAKPOINTS.TABLET ? \"horizontal\" : \"vertical\";\r\n  });\r\n  return {\r\n    fieldVariant,\r\n  };\r\n};\r\n","import { storeToRefs } from \"pinia\";\r\nimport { computed } from \"vue\";\r\nimport { useStore } from \"@/store\";\r\n\r\nexport const useFieldsetCols = () => {\r\n  const state = useStore();\r\n  const { windowWidth } = storeToRefs(state);\r\n\r\n  const computedCols = computed(() => {\r\n    return windowWidth.value >= 1024 ? \"2col\" : \"1col\";\r\n  });\r\n\r\n  return { computedCols };\r\n};\r\n","import { ReactiveVariable } from \"vue/macros\";\r\nimport { FormFieldProps } from \"@/views/components/form/types\";\r\nimport { reactive } from \"vue\";\r\nimport { requiredRules } from \"@/kernel/validation/vuelidate/requiredRules\";\r\n\r\nexport type RoleFormFields = ReactiveVariable<{\r\n  name: FormFieldProps;\r\n}>;\r\n\r\nexport const useFields = () => {\r\n  const fields: RoleFormFields = reactive({\r\n    name: {\r\n      value: \"\",\r\n      id: \"role\",\r\n      label: \"Наименование\",\r\n      rules: requiredRules(),\r\n    },\r\n  });\r\n\r\n  return {\r\n    fields,\r\n  };\r\n};\r\n","import { RoleAddData } from \"@/kernel/api/dto/AgentRole\";\r\nimport { RoleFormFields } from \"@/views/modules/CrudForms/LacRoleForm/use/useFields\";\r\n\r\nexport const usePrepareData = (fields: RoleFormFields) => {\r\n  function prepareData(): RoleAddData {\r\n    const res: RoleAddData = {\r\n      role: fields.name.value,\r\n    };\r\n    return res;\r\n  }\r\n\r\n  return { prepareData };\r\n};\r\n","import { useStoreModal } from \"@/store/modal\";\r\nimport { AvailableModalsEnum } from \"@/store/modal/types\";\r\n\r\nexport const useInitTemplate = () => {\r\n  const modals = useStoreModal();\r\n\r\n  function initTemplate(callback: () => Promise<void>) {\r\n    return async () => {\r\n      try {\r\n        modals.open(AvailableModalsEnum.LOADER);\r\n        await callback();\r\n        modals.close();\r\n      } catch (e) {\r\n        modals.open(AvailableModalsEnum.ERROR, {\r\n          text: (e as ErrorEvent).message,\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  return { initTemplate };\r\n};\r\n","import { useStoreModal } from \"@/store/modal\";\r\nimport { AvailableModalsEnum } from \"@/store/modal/types\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport const useSubmitTemplate = (validateForm: () => Promise<boolean>) => {\r\n  const modals = useStoreModal();\r\n  const router = useRouter();\r\n\r\n  function submitTemplate(\r\n    callback: () => Promise<void>,\r\n    hideSuccess?: boolean\r\n  ) {\r\n    return async () => {\r\n      if (await validateForm()) {\r\n        try {\r\n          modals.open(AvailableModalsEnum.LOADER);\r\n          await callback();\r\n          !hideSuccess &&\r\n            modals.open(AvailableModalsEnum.SUCCESS, {\r\n              callback: () => router.back(),\r\n            });\r\n        } catch (e) {\r\n          modals.open(AvailableModalsEnum.ERROR, {\r\n            text: (e as ErrorEvent).message,\r\n          });\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  return { submitTemplate };\r\n};\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, openBlock as _openBlock, createElementBlock as _createElementBlock, mergeProps as _mergeProps, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"lac-fieldset\" }\n\nimport { computed } from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'LacFieldset',\n  props: {\n    title: {},\n    grid: {},\n    gapRow: {},\n    gapCol: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\r\n\r\n\r\nconst gridStyles = computed(() => [\r\n  \"lac-fieldset__grid\",\r\n  props.grid === \"2col\" ? \"mod-2col\" : \"\",\r\n]);\r\n\r\nconst gapStyles = computed(() => {\r\n  return `\r\n  ${\r\n    typeof props.gapRow === \"number\"\r\n      ? \"grid-row-gap: \" + props.gapRow + \"px\"\r\n      : \"\"\r\n  }\r\n  ${\r\n    typeof props.gapCol === \"number\"\r\n      ? \"grid-column-gap: \" + props.gapCol + \"px\"\r\n      : \"\"\r\n  }\r\n  `;\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_1, [\n    (props.title)\n      ? (_openBlock(), _createElementBlock(\"legend\", _normalizeProps(_mergeProps({ key: 0 }, _ctx.$attrs)), _toDisplayString(props.title), 17))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass(gridStyles.value),\n      style: _normalizeStyle(gapStyles.value)\n    }, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ], 6)\n  ]))\n}\n}\n\n})","import script from \"./LacFieldset.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./LacFieldset.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./LacFieldset.vue?vue&type=style&index=0&id=814c3fb6&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport LacLabel from \"@/views/components/ui/LacLabel.vue\";\r\nimport { computed, ref } from \"vue\";\r\nimport useVuelidate, { ValidationArgs } from \"@vuelidate/core\";\r\nimport formModule from \"@/views/components/form/form.module.scss\";\r\nimport { FormField } from \"@/views/components/form/types\";\r\nimport { useToast } from \"primevue/usetoast\";\r\n\r\ninterface Props {\r\n  label?: string;\r\n  placeholder?: string;\r\n  id: string;\r\n  value: string | number;\r\n  icon?: string;\r\n  rules?: ValidationArgs;\r\n  type?: string;\r\n  labelPosition?: string;\r\n  disabled?: boolean;\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'LacInputText',\n  props: {\n    label: {},\n    placeholder: {},\n    id: {},\n    value: {},\n    icon: {},\n    rules: {},\n    type: {},\n    labelPosition: {},\n    disabled: { type: Boolean }\n  },\n  emits: [\"update:value\"],\n  setup(__props: any, { expose: __expose, emit }) {\n\nconst props = __props;\n\r\nconst toast = useToast();\r\n\r\n\r\nconst isShow = ref(false);\r\n\r\nconst v$ = useVuelidate(\r\n  { props: { value: props.rules || {} } },\r\n  {\r\n    props,\r\n  }\r\n);\r\n\r\nconst validationError = computed(() =>\r\n  v$.value.$errors.length ? true : false\r\n);\r\n\r\n\r\n\r\nconst value = computed({\r\n  get() {\r\n    return props.value;\r\n  },\r\n  set(value) {\r\n    emit(\"update:value\", value);\r\n  },\r\n});\r\n\r\nasync function validate(): Promise<boolean> {\r\n  const isValid = await v$.value.$validate();\r\n  if (!isValid) {\r\n    toast.add({\r\n      severity: \"error\",\r\n      summary: props.label,\r\n      detail: v$.value.$errors[0].$message,\r\n    });\r\n  }\r\n  return isValid;\r\n}\r\n\r\nfunction validationReset(): void {\r\n  v$.value.$reset();\r\n}\r\n\r\n__expose<FormField>({ validate, validationReset, id: props.id });\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_InputText = _resolveComponent(\"InputText\")!\n\n  return (_openBlock(), _createBlock(LacLabel, {\n    id: props.id,\n    label: props.label,\n    labelPosition: props.labelPosition\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_InputText, {\n        modelValue: value.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event)),\n        id: props.id,\n        placeholder: props.placeholder,\n        type: _ctx.type ? _ctx.type : 'text',\n        disabled: _ctx.disabled,\n        class: _normalizeClass(['w-full', { 'p-invalid': validationError.value }]),\n        onBlur: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('blur', _ctx.event)))\n      }, null, 8, [\"modelValue\", \"id\", \"placeholder\", \"type\", \"disabled\", \"class\"])\n    ]),\n    _: 1\n  }, 8, [\"id\", \"label\", \"labelPosition\"]))\n}\n}\n\n})","import script from \"./LacInputText.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./LacInputText.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref } from \"vue\";\r\nimport { useFormValidate } from \"@/use/useFormValidate\";\r\nimport { CrudFormCreateInterface } from \"@/views/modules/CrudForms/CrudFormInterface\";\r\nimport { useSubmitTemplate } from \"@/views/modules/CrudForms/use/useSubmitTemplate\";\r\nimport { useInitTemplate } from \"@/views/modules/CrudForms/use/useInitTemplate\";\r\nimport {\r\n  RoleFormFields,\r\n  useFields,\r\n} from \"@/views/modules/CrudForms/LacRoleForm/use/useFields\";\r\nimport { usePrepareData } from \"@/views/modules/CrudForms/LacRoleForm/use/usePrepareData\";\r\nimport { postAgentRoleAdd } from \"@/kernel/api/methods/AgentRole\";\r\n\r\nexport const useRoleCreateForm: () => CrudFormCreateInterface<RoleFormFields> =\r\n  () => {\r\n    const { setFieldRef, validateForm, resetValidations } = useFormValidate();\r\n    const isInit = ref(false);\r\n\r\n    const { fields } = useFields();\r\n    const { prepareData } = usePrepareData(fields);\r\n    const { submitTemplate } = useSubmitTemplate(validateForm);\r\n    const { initTemplate } = useInitTemplate();\r\n\r\n    async function init() {\r\n      isInit.value = true;\r\n    }\r\n\r\n    async function submit() {\r\n      const payload = prepareData();\r\n      const res = await postAgentRoleAdd(payload);\r\n\r\n      if (res.error) {\r\n        throw new Error(\r\n          res.data.info\r\n            ? JSON.stringify(res.data.info, null, 2)\r\n            : \"Не удалось создать роль\"\r\n        );\r\n      }\r\n    }\r\n\r\n    return {\r\n      setFieldRef,\r\n      validateForm,\r\n      resetValidations,\r\n      fields,\r\n      init: initTemplate(init),\r\n      submit: submitTemplate(submit),\r\n      isInit,\r\n    };\r\n  };\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, resolveComponent as _resolveComponent, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = [\"onSubmit\"]\n\nimport { onMounted } from \"vue\";\r\n\r\nimport LacFieldset from \"@/views/components/form/field/LacFieldset.vue\";\r\nimport LacInputText from \"@/views/components/form/input/LacInputText.vue\";\r\n\r\nimport { useFieldsetCols } from \"@/views/components/form/field/useFieldsetCols\";\r\nimport { useFieldVariant } from \"@/views/components/form/field/useFieldVariant\";\r\nimport { useStoreModal } from \"@/store/modal\";\r\nimport { useRoleCreateForm } from \"@/views/modules/CrudForms/LacRoleForm/use/useRoleCreateForm\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'LacRoleCreateForm',\n  setup(__props) {\n\r\nconst {\r\n  setFieldRef,\r\n  validateForm,\r\n  resetValidations,\r\n  fields,\r\n  init,\r\n  isInit,\r\n  submit,\r\n} = useRoleCreateForm();\r\n\r\nconst modals = useStoreModal();\r\nconst { fieldVariant } = useFieldVariant();\r\nconst { computedCols } = useFieldsetCols();\r\n\r\nasync function onSubmit() {\r\n  await submit();\r\n}\r\nonMounted(init);\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n\n  return (_unref(isInit))\n    ? (_openBlock(), _createElementBlock(\"form\", {\n        key: 0,\n        class: \"lac-form\",\n        onSubmit: _withModifiers(onSubmit, [\"prevent\"])\n      }, [\n        _createVNode(LacFieldset, {\n          class: \"mb16\",\n          grid: _unref(computedCols)\n        }, {\n          default: _withCtx(() => [\n            _createVNode(LacInputText, {\n              variant: _unref(fieldVariant),\n              value: _unref(fields).name.value,\n              \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(fields).name.value) = $event)),\n              id: _unref(fields).name.id,\n              label: _unref(fields).name.label,\n              rules: _unref(fields).name.rules,\n              placeholder: \"\",\n              ref: _unref(setFieldRef)\n            }, null, 8, [\"variant\", \"value\", \"id\", \"label\", \"rules\"])\n          ]),\n          _: 1\n        }, 8, [\"grid\"]),\n        _createVNode(_component_Button, {\n          type: \"submit\",\n          label: \"Добавить\"\n        })\n      ], 40, _hoisted_1))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","import script from \"./LacRoleCreateForm.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./LacRoleCreateForm.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport FormTemplate from \"@/views/templates/FormTemplate/FormTemplate.vue\";\r\nimport LacRoleCreateForm from \"@/views/modules/CrudForms/LacRoleForm/LacRoleCreateForm.vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AdminRoleCreatePage',\n  setup(__props) {\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(FormTemplate, { title: \"Добавление должности\" }, {\n    default: _withCtx(() => [\n      _createVNode(LacRoleCreateForm)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./AdminRoleCreatePage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./AdminRoleCreatePage.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"form-template\" }\nconst _hoisted_2 = { class: \"form-template__header mb30\" }\nconst _hoisted_3 = { class: \"form-template__main\" }\n\nimport router from \"@/router\";\r\nimport { computed } from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'FormTemplate',\n  props: {\n    title: {},\n    stretch: { type: Boolean },\n    maxWidth: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\r\n\r\n\r\nconst containerStyle = computed(() => {\r\n  const res: Record<string, string> = {};\r\n\r\n  if (props.maxWidth !== undefined) {\r\n    res.maxWidth = props.maxWidth + \"px\";\r\n  }\r\n\r\n  return res;\r\n});\r\n\r\nasync function onBack() {\r\n  await router.back();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Toast = _resolveComponent(\"Toast\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_Toast),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"form-template__container\", { 'mod-stretch': _ctx.stretch }]),\n      style: _normalizeStyle(containerStyle.value)\n    }, [\n      _createElementVNode(\"header\", _hoisted_2, [\n        _createTextVNode(_toDisplayString(props.title) + \" \", 1),\n        _createVNode(_component_Button, {\n          onClick: onBack,\n          icon: \"pi pi-times\",\n          rounded: \"\",\n          outlined: \"\",\n          severity: \"danger\",\n          class: \"border-none\"\n        })\n      ])\n    ], 6),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"form-template__container\", { 'mod-stretch': _ctx.stretch }]),\n      style: _normalizeStyle(containerStyle.value)\n    }, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _renderSlot(_ctx.$slots, \"default\")\n      ])\n    ], 6)\n  ]))\n}\n}\n\n})","import script from \"./FormTemplate.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./FormTemplate.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./FormTemplate.vue?vue&type=style&index=0&id=223ac877&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getAgentRoleDelete","async","res","getHttp","get","searchParams","role","NotRequestException","name","getAgentRoleList","params","size","postAgentRoleAdd","post","payload","postAgentRoleEdit","oldRole","newRole","old_role","new_role","BREAKPOINTS","useFieldVariant","windowWidth","storeToRefs","useStore","fieldVariant","computed","value","TABLET","useFieldsetCols","state","computedCols","useFields","fields","reactive","id","label","rules","requiredRules","usePrepareData","prepareData","useInitTemplate","modals","useStoreModal","initTemplate","callback","open","AvailableModalsEnum","LOADER","close","e","ERROR","text","message","useSubmitTemplate","validateForm","router","useRouter","submitTemplate","hideSuccess","SUCCESS","back","_hoisted_1","class","_defineComponent","__name","props","title","grid","gapRow","gapCol","setup","__props","gridStyles","gapStyles","_ctx","_cache","_openBlock","_createElementBlock","_normalizeProps","_mergeProps","key","$attrs","_toDisplayString","_createCommentVNode","_createElementVNode","_normalizeClass","style","_normalizeStyle","_renderSlot","$slots","__exports__","placeholder","icon","type","labelPosition","disabled","Boolean","emits","expose","__expose","emit","toast","useToast","v$","ref","useVuelidate","validationError","$errors","length","set","validate","isValid","$validate","add","severity","summary","detail","$message","validationReset","$reset","_component_InputText","_resolveComponent","_createBlock","LacLabel","default","_withCtx","_createVNode","modelValue","$event","onBlur","$emit","event","_","useRoleCreateForm","setFieldRef","resetValidations","useFormValidate","isInit","init","submit","error","Error","data","info","JSON","stringify","onSubmit","onMounted","_component_Button","_unref","_withModifiers","LacFieldset","LacInputText","variant","FormTemplate","LacRoleCreateForm","_hoisted_2","_hoisted_3","stretch","maxWidth","containerStyle","undefined","onBack","_component_Toast","_createTextVNode","onClick","rounded","outlined"],"sourceRoot":""}