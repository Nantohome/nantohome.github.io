"use strict";(self["webpackChunklac"]=self["webpackChunklac"]||[]).push([[824],{4008:function(e,t,a){a.d(t,{F:function(){return n}});var l=a(5420);const n=e=>({maxLength:l.BM.withMessage(`Максимальная длина ${e||1024} символов`,(0,l.BS)(e||1024))})},4436:function(e,t,a){a.d(t,{U:function(){return o}});var l,n=a(3396);(function(e){e[e["MOBILE"]=375]="MOBILE",e[e["TABLET"]=768]="TABLET",e[e["NOTEBOOK"]=1024]="NOTEBOOK",e[e["DESKTOP"]=1440]="DESKTOP"})(l||(l={}));var i=a(1020),s=a(5845);const o=()=>{const{windowWidth:e}=(0,i.Jk)((0,s.o)()),t=(0,n.Fl)((()=>e.value>=l.TABLET?"horizontal":"vertical"));return{fieldVariant:t}}},1411:function(e,t,a){a.d(t,{b:function(){return s}});var l=a(1020),n=a(3396),i=a(5845);const s=()=>{const e=(0,i.o)(),{windowWidth:t}=(0,l.Jk)(e),a=(0,n.Fl)((()=>t.value>=1024?"2col":"1col"));return{computedCols:a}}},5623:function(e,t,a){a.d(t,{z:function(){return n}});a(7658);var l=a(9152);const n=e=>{const t=(0,l.N)();async function a(e,a){const l=await t.list({search:e});a.items=[];for(const t of l.data)a.items.push({value:String(t.partner_id),text:t.name})}return{onSelectSearch:a}}},9358:function(e,t,a){a.d(t,{P:function(){return u}});a(7658);var l=a(3396),n=a(1020),i=a(5845),s=a(6646),o=a(9152),r=a(7954);const u=e=>{const t=(0,s.F)(),a=(0,o.N)(),u=(0,r.I)(),{agents:d}=(0,n.Jk)(t),{dictionary:c}=(0,n.Jk)((0,i.o)()),{partners:p,selectPartnerId:v}=(0,n.Jk)(a);async function m(e,a,l){if(e.value=null,e.items=[],e.available=!1,!a)return;await t.getAgents({partner_id:a});const n=d.value[a].length||0;if(n){for(const t of d.value[a]){const a={value:String(t.agent_id),text:t.name};e.items.push(a),l&&l==t.agent_id&&(e.value=a)}1===n?e.value=e.items[0]:e.available=!0}}async function f(e,t){if(e.items=[],e.available=!1,e.value=null,v.value)e.items=[{value:String(v.value),text:p.value[v.value].name}],e.value=e.items[0];else{t&&await a.fetch(t);const l=await a.list({});if(l.count){let a=-1;for(const[n,i]of l.data.entries())e.items.push({value:String(i.partner_id),text:i.name}),t&&i.partner_id==t&&(a=n);if(l.count>1){if(t)if(a>-1)e.value=e.items[a];else{const a={value:String(t),text:p.value[t].name};e.value=a,e.items.push(a)}e.available=!0}else e.value=e.items[0]}}}async function h(e,t,a,l){if(e.items=[],e.available=!1,e.value=null,!a)return;const n=u.getPoints({partner_id:a,noStore:!0}),i="offer"===t?"subject_to_sell":"subject_to_buy",s=n.filter((e=>e[i].length));for(const r of s)e.items.push({value:String(r.point_id),text:r.name});const o=e.items.length;if(o>1){if(l){const t=s.findIndex((e=>e.point_id===l));e.value=e.items[t]}e.available=!0}else 1==o&&(e.value=e.items[0])}async function b(e,t,a,n){if(e.items=[],e.available=!1,e.value=null,!a)return;const[i]=u.getPoints({point_id:a,noStore:!0}),s="offer"===t?i.subject_to_sell:i.subject_to_buy,o=[];for(const[l,u]of s.entries())e.items.push({value:u,text:c.value.point.subject[u].desc,val:c.value.point.subject[u].val}),o[c.value.point.subject[u].val]=l;const r=e.items.length;r>1?(e.available=!0,n&&(e.value=e.items[o[n]])):1==r&&await(0,l.Y3)().then((()=>{e.value=e.items[0]}))}async function g(e,t,a){if(e.items=[],e.value=null,e.available=!1,console.log(e.value,t,a),!t)return;const n=c.value.offer.formula,i=c.value.offer.available_formula_by_subject,s=[],o=[];for(const[l,u]of i[t].entries())s.push({value:u,text:n[u]}),o[u]=l;e.items=s,e.available=!0,await(0,l.Y3)().then((()=>{e.value=a?e.items[o[a]]:"milk"===t?e.items[o["standart"]]:e.items[o["physical_weight"]]}));const r=e.items.length;r>1&&(e.available=!0)}async function _(e,t,a){const l=[],n=[];let i=0;for(const o in c.value[t]["status"])l.push({text:c.value[t]["status"][o],value:o}),n[o]=i,i++;e.items.length||(e.items=l);const s="offer"===t?"ready_to_sell":"ready_to_buy";e.value=a?e.items[n[a]]:e.items[n[s]]}return{updateAgent:m,updatePartner:f,updatePoint:h,updateSubject:b,updateFormula:g,updateStatus:_}}},140:function(e,t,a){a.d(t,{Z:function(){return r}});var l=a(3396),n=a(7139);const i={class:"lac-fieldset"};var s=(0,l.aZ)({__name:"LacFieldset",props:{title:{},grid:{},gapRow:{},gapCol:{}},setup(e){const t=e,a=(0,l.Fl)((()=>["lac-fieldset__grid","2col"===t.grid?"mod-2col":""])),s=(0,l.Fl)((()=>`\n  ${"number"===typeof t.gapRow?"grid-row-gap: "+t.gapRow+"px":""}\n  ${"number"===typeof t.gapCol?"grid-column-gap: "+t.gapCol+"px":""}\n  `));return(e,o)=>((0,l.wg)(),(0,l.iD)("fieldset",i,[t.title?((0,l.wg)(),(0,l.iD)("legend",(0,n.vs)((0,l.dG)({key:0},e.$attrs)),(0,n.zw)(t.title),17)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,n.C_)(a.value),style:(0,n.j5)(s.value)},[(0,l.WI)(e.$slots,"default")],6)]))}});const o=s;var r=o},9546:function(e,t,a){a.d(t,{Z:function(){return w}});var l=a(3396),n=a(4870),i=a(7139),s=a(5838),o=a(4219),r=a(56),u=a(3412),d="\n.p-inputtextarea-resizable {\n    overflow: hidden;\n    resize: none;\n}\n\n.p-fluid .p-inputtextarea {\n    width: 100%;\n}\n",c={root:function(e){var t=e.instance,a=e.props;return["p-inputtextarea p-inputtext p-component",{"p-filled":t.filled,"p-inputtextarea-resizable ":a.autoResize}]}},p=(0,u.X)(d,{name:"textarea",manual:!0}),v=p.load,m={name:"BaseTextarea",extends:r.Z,props:{modelValue:null,autoResize:Boolean},css:{classes:c,loadStyle:v},provide:function(){return{$parentInstance:this}}},f={name:"Textarea",extends:m,emits:["update:modelValue"],mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){var e=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height="calc(".concat(e.borderTopWidth," + ").concat(e.borderBottomWidth," + ").concat(this.$el.scrollHeight,"px)"),parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||""===this.$attrs.disabled}}}}},h=["value"];function b(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("textarea",(0,l.dG)({class:e.cx("root"),value:e.modelValue,onInput:t[0]||(t[0]=function(){return s.onInput&&s.onInput.apply(s,arguments)})},e.ptm("root",s.ptmParams),{"data-pc-name":"textarea"}),null,16,h)}f.render=b;var g=a(3435),_=(0,l.aZ)({__name:"LacTextarea",props:{label:{default:""},placeholder:{},noResize:{type:Boolean},rows:{},id:{},value:{},icon:{},labelPosition:{},rules:{},disabled:{type:Boolean}},emits:["update:value"],setup(e,{expose:t,emit:a}){const r=e,u=(0,g.p)(),d=((0,n.iH)(!1),(0,o.ZP)({props:{value:r.rules||{}}},{props:r})),c=(0,l.Fl)((()=>!!d.value.$errors.length)),p=(0,l.Fl)({get(){return r.value},set(e){a("update:value",e)}});async function v(){const e=await d.value.$validate();return e||u.add({severity:"error",summary:r.label,detail:d.value.$errors[0].$message}),e}function m(){d.value.$reset()}return t({validate:v,validationReset:m,id:r.id}),(e,t)=>((0,l.wg)(),(0,l.j4)(s.Z,{id:r.id,label:r.label,labelPosition:r.labelPosition},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(f),{autoResize:"",id:r.id,class:(0,i.C_)(["w-full",{"p-invalid":c.value}]),modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),"no-resize":r.noResize,rows:r.rows,placeholder:r.placeholder,disabled:e.disabled},null,8,["id","class","modelValue","no-resize","rows","placeholder","disabled"])])),_:1},8,["id","label","labelPosition"]))}});const y=_;var w=y},7174:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(3396),n=a(4870),i=a(7139),s=a(5838),o=a(4219),r=a(5517),u=a(3435),d=(0,l.aZ)({__name:"LacSelect",props:{label:{default:""},placeholder:{},items:{},id:{default:String(Date.now())},value:{},icon:{},rules:{},required:{type:Boolean,default:!1},disabled:{type:Boolean},valueBy:{},searchable:{type:Boolean},clearOnClose:{type:Boolean},showClear:{type:Boolean}},emits:["update:value","search"],setup(e,{expose:t,emit:a}){const d=e,c=(0,u.p)(),p=(0,l.Fl)((()=>f.value||"")),v=(0,o.ZP)({nestedValue:d.rules||{}},{nestedValue:p}),m=(0,l.Fl)((()=>!!v.value.$errors.length)),f=(0,l.Fl)({get(){return d.value},set(e){a("update:value",e)}});async function h(){const e=await v.value.$validate();return e||c.add({severity:"error",summary:d.label,detail:v.value.$errors[0].$message}),e}function b(){v.value.$reset()}return t({validate:h,validationReset:b,id:d.id}),(e,t)=>((0,l.wg)(),(0,l.j4)(s.Z,{id:d.id,label:d.label,required:d.required},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(r.Z),{id:d.id,label:d.label,placeholder:d.placeholder,modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),options:d.items,optionLabel:"text",class:(0,i.C_)(["w-full",{"p-invalid":m.value}]),"aria-describedby":"dd-error",disabled:e.disabled,filter:e.searchable,showClear:e.showClear,resetFilterOnHide:e.clearOnClose,onFilter:t[1]||(t[1]=t=>e.$emit("search",t.value)),emptyFilterMessage:"Пусто",emptyMessage:"Пусто",filterPlaceholder:"Поиск"},null,8,["id","label","placeholder","modelValue","options","class","disabled","filter","showClear","resetFilterOnHide"])])),_:1},8,["id","label","required"]))}});const c=d;var p=c},2793:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(3396),n=a(7139),i=a(1839);const s={class:"form-template"},o={class:"form-template__header mb30"},r={class:"form-template__main"};var u=(0,l.aZ)({__name:"FormTemplate",props:{title:{},stretch:{type:Boolean},maxWidth:{}},setup(e){const t=e,a=(0,l.Fl)((()=>{const e={};return void 0!==t.maxWidth&&(e.maxWidth=t.maxWidth+"px"),e}));async function u(){await i.Z.back()}return(e,i)=>{const d=(0,l.up)("Toast"),c=(0,l.up)("Button");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(d),(0,l._)("div",{class:(0,n.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,n.j5)(a.value)},[(0,l._)("header",o,[(0,l.Uk)((0,n.zw)(t.title)+" ",1),(0,l.Wm)(c,{onClick:u,icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",class:"border-none"})])],6),(0,l._)("div",{class:(0,n.C_)(["form-template__container",{"mod-stretch":e.stretch}]),style:(0,n.j5)(a.value)},[(0,l._)("div",r,[(0,l.WI)(e.$slots,"default")])],6)])}}});const d=u;var c=d}}]);
//# sourceMappingURL=824.b4ff7477.js.map