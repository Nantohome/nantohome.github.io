"use strict";(self["webpackChunklac"]=self["webpackChunklac"]||[]).push([[979],{5591:function(a,e,l){l.r(e),l.d(e,{default:function(){return x}});var r=l(3396),t=l(4870),m=l(2793),o=l(9242),i=l(140),s=l(9546),n=l(7174),u=l(5623),d=l(2057),c=l(1411),v=l(4436),U=l(3653),S=l(9286),b=l(3856);const f=["onSubmit"];var p=(0,r.aZ)({__name:"LacOfferEditForm",props:{offerId:{}},setup(a){const e=a,l=(0,d.a)(),{setFieldRef:m,validateForm:p,fetchData:h,fillForm:P,resetValidations:w,fields:g,init:_,isInit:x,submitEdit:Z,isChanged:j}=l,{fieldVariant:W}=(0,v.U)(),{computedCols:y}=(0,c.b)(),D=(0,S.N)(),{onSelectSearch:C}=(0,u.z)(x),k=(0,r.Fl)((()=>!g.commonParams.subject.value));function F(){g.baseParams.base_price.value=g.baseParams.base_price.hidden}function E(a){g.baseParams.base_price.hidden=Number(a).toFixed(4)}async function H(){const a=await p();a&&await Z(Number(e.offerId))}return(0,r.bv)((async()=>{D.open(b.y.LOADER),await h(Number(e.offerId)),await _(),D.open(b.y.LOADER),await P(),D.close()})),(a,e)=>{const l=(0,r.up)("Button");return(0,t.SU)(x)?((0,r.wg)(),(0,r.iD)("form",{key:0,class:"lac-form",onSubmit:(0,o.iM)(H,["prevent"])},[(0,r.Wm)(i.Z,{title:"Общие параметры",class:"mb16",grid:(0,t.SU)(y)},{default:(0,r.w5)((()=>[(0,r.Wm)(n.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.partner.value,"onUpdate:value":e[0]||(e[0]=a=>(0,t.SU)(g).commonParams.partner.value=a),items:(0,t.SU)(g).commonParams.partner.items,id:(0,t.SU)(g).commonParams.partner.id,label:(0,t.SU)(g).commonParams.partner.label,rules:(0,t.SU)(g).commonParams.partner.rules,placeholder:(0,t.SU)(g).commonParams.partner.placeholder,searchable:"","show-clear":"","clear-on-close":"",onSearch:e[1]||(e[1]=a=>(0,t.SU)(C)(a,(0,t.SU)(g).commonParams.partner)),disabled:!(0,t.SU)(g).commonParams.partner.available,ref:(0,t.SU)(m)},null,8,["variant","value","items","id","label","rules","placeholder","disabled"]),(0,r.Wm)(n.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.subject.value,"onUpdate:value":e[2]||(e[2]=a=>(0,t.SU)(g).commonParams.subject.value=a),items:(0,t.SU)(g).commonParams.subject.items,id:(0,t.SU)(g).commonParams.subject.id,label:(0,t.SU)(g).commonParams.subject.label,rules:(0,t.SU)(g).commonParams.subject.rules,placeholder:(0,t.SU)(g).commonParams.subject.placeholder,disabled:!(0,t.SU)(g).commonParams.partner.value||!(0,t.SU)(g).commonParams.point.value||!(0,t.SU)(g).commonParams.subject.available,ref:(0,t.SU)(m)},null,8,["variant","value","items","id","label","rules","placeholder","disabled"]),(0,r.Wm)(n.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.point.value,"onUpdate:value":e[3]||(e[3]=a=>(0,t.SU)(g).commonParams.point.value=a),items:(0,t.SU)(g).commonParams.point.items,id:(0,t.SU)(g).commonParams.point.id,label:(0,t.SU)(g).commonParams.point.label,rules:(0,t.SU)(g).commonParams.point.available&&(0,t.SU)(g).commonParams.partner.value&&(0,t.SU)(g).commonParams.point.rules,placeholder:(0,t.SU)(g).commonParams.point.placeholder,ref:(0,t.SU)(m),disabled:!(0,t.SU)(g).commonParams.point.available||!(0,t.SU)(g).commonParams.partner.value},null,8,["variant","value","items","id","label","rules","placeholder","disabled"]),(0,r.Wm)(n.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.statusSelect.value,"onUpdate:value":e[4]||(e[4]=a=>(0,t.SU)(g).commonParams.statusSelect.value=a),items:(0,t.SU)(g).commonParams.statusSelect.items,id:(0,t.SU)(g).commonParams.statusSelect.id,label:(0,t.SU)(g).commonParams.statusSelect.label,rules:(0,t.SU)(g).commonParams.statusSelect.rules,placeholder:(0,t.SU)(g).commonParams.statusSelect.placeholder,ref:(0,t.SU)(m),disabled:k.value},null,8,["variant","value","items","id","label","rules","placeholder","disabled"]),(0,r.Wm)(U.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.weight.value,"onUpdate:value":e[5]||(e[5]=a=>(0,t.SU)(g).commonParams.weight.value=a),id:(0,t.SU)(g).commonParams.weight.id,label:(0,t.SU)(g).commonParams.weight.label,rules:(0,t.SU)(g).commonParams.weight.rules,ref:(0,t.SU)(m),max:(0,t.SU)(g).commonParams.weight.max,min:(0,t.SU)(g).commonParams.weight.min,step:(0,t.SU)(g).commonParams.weight.step,"after-dot":(0,t.SU)(g).commonParams.weight.afterDot,suffix:"кг","locale-prettify":"",disabled:k.value},null,8,["variant","value","id","label","rules","max","min","step","after-dot","disabled"]),(0,r.Wm)(U.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).commonParams.carCount.value,"onUpdate:value":e[6]||(e[6]=a=>(0,t.SU)(g).commonParams.carCount.value=a),id:(0,t.SU)(g).commonParams.carCount.id,label:(0,t.SU)(g).commonParams.carCount.label,rules:(0,t.SU)(g).commonParams.carCount.rules,ref:(0,t.SU)(m),min:(0,t.SU)(g).commonParams.carCount.min,max:(0,t.SU)(g).commonParams.carCount.max,step:(0,t.SU)(g).commonParams.carCount.step,"after-dot":(0,t.SU)(g).commonParams.carCount.afterDot,suffix:(0,t.SU)(g).commonParams.carCount.unit,disabled:k.value},null,8,["variant","value","id","label","rules","min","max","step","after-dot","suffix","disabled"])])),_:1},8,["grid"]),(0,r.Wm)(i.Z,{title:"Параметры расчета цены",class:"mb16",grid:(0,t.SU)(y)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(g).baseParams,((a,e)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e},[a.items?((0,r.wg)(),(0,r.j4)(n.Z,{key:0,variant:(0,t.SU)(W),value:a.value,"onUpdate:value":e=>a.value=e,items:a.items,id:a.id,label:a.label,rules:a.rules,placeholder:a.placeholder,ref_for:!0,ref:(0,t.SU)(m),disabled:k.value},null,8,["variant","value","onUpdate:value","items","id","label","rules","placeholder","disabled"])):((0,r.wg)(),(0,r.j4)(U.Z,{key:1,variant:(0,t.SU)(W),value:a.value,"onUpdate:value":e=>a.value=e,id:a.id,label:a.label,rules:a.available&&a.rules,ref_for:!0,ref:(0,t.SU)(m),max:a.max,min:a.min,step:a.step,"after-dot":a.afterDot,suffix:a.unit,disabled:"fat_rate"===a.id||!a.available||k.value||void 0!==a.fix,hidden:a.hidden,onBlur:E,onFocus:F},null,8,["variant","value","onUpdate:value","id","label","rules","max","min","step","after-dot","suffix","disabled","hidden"]))],64)))),128))])),_:1},8,["grid"]),(0,r.Wm)(i.Z,{title:"Фактические показатели",class:"mb16",grid:(0,t.SU)(y)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(g).factParams,((a,e)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e},[a.items?((0,r.wg)(),(0,r.j4)(n.Z,{key:0,variant:(0,t.SU)(W),value:a.value,"onUpdate:value":e=>a.value=e,items:a.items,id:a.id,label:a.label,rules:a.rules,placeholder:a.placeholder,ref_for:!0,ref:(0,t.SU)(m),disabled:k.value},null,8,["variant","value","onUpdate:value","items","id","label","rules","placeholder","disabled"])):((0,r.wg)(),(0,r.j4)(U.Z,{key:1,variant:(0,t.SU)(W),value:a.value,"onUpdate:value":e=>a.value=e,id:a.id,label:a.label,rules:a.available&&a.rules,ref_for:!0,ref:(0,t.SU)(m),max:a.max,min:a.min,step:a.step,"after-dot":a.afterDot,suffix:a.unit,disabled:!a.available||k.value||void 0!==a.fix},null,8,["variant","value","onUpdate:value","id","label","rules","max","min","step","after-dot","suffix","disabled"]))],64)))),128))])),_:1},8,["grid"]),(0,r.Wm)(i.Z,{title:"Прочее",class:"mb16",grid:(0,t.SU)(y)},{default:(0,r.w5)((()=>[(0,r.Wm)(U.Z,{variant:(0,t.SU)(W),value:(0,t.SU)(g).other.other_price.value,"onUpdate:value":e[7]||(e[7]=a=>(0,t.SU)(g).other.other_price.value=a),id:(0,t.SU)(g).other.other_price.id,label:(0,t.SU)(g).other.other_price.label,rules:(0,t.SU)(g).other.other_price.available&&(0,t.SU)(g).other.other_price.rules,ref:(0,t.SU)(m),max:(0,t.SU)(g).other.other_price.max,min:(0,t.SU)(g).other.other_price.min,step:(0,t.SU)(g).other.other_price.step,"after-dot":(0,t.SU)(g).other.other_price.afterDot,suffix:(0,t.SU)(g).other.other_price.unit,disabled:!(0,t.SU)(g).other.other_price.available||k.value},null,8,["variant","value","id","label","rules","max","min","step","after-dot","suffix","disabled"])])),_:1},8,["grid"]),(0,r.Wm)(i.Z,{title:"Расчетные показатели",class:"mb16",grid:(0,t.SU)(y)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(g).calculateParams,((a,e)=>((0,r.wg)(),(0,r.j4)(U.Z,{key:e,variant:(0,t.SU)(W),value:a.value,id:a.id,label:a.label,ref_for:!0,ref:(0,t.SU)(m),min:a.min,step:a.step,"after-dot":a.afterDot,suffix:a.unit,disabled:""},null,8,["variant","value","id","label","min","step","after-dot","suffix"])))),128))])),_:1},8,["grid"]),(0,r.Wm)(i.Z,{title:"Комментарий",class:"mb8"},{default:(0,r.w5)((()=>[(0,r.Wm)(s.Z,{"no-resize":"",rows:3,value:(0,t.SU)(g).other.comment.value,"onUpdate:value":e[8]||(e[8]=a=>(0,t.SU)(g).other.comment.value=a),id:(0,t.SU)(g).other.comment.id,rules:(0,t.SU)(g).other.comment.rules,ref:(0,t.SU)(m),disabled:k.value},null,8,["value","id","rules","disabled"])])),_:1}),(0,r.Wm)(l,{label:"Сохранить",type:"submit",disabled:k.value||!(0,t.SU)(j)},null,8,["disabled"])],40,f)):(0,r.kq)("",!0)}}});const h=p;var P=h,w=l(2483),g=(0,r.aZ)({__name:"OfferEditPage",setup(a){const e=(0,w.yj)();return(a,l)=>((0,r.wg)(),(0,r.j4)(m.Z,{title:"Редактирование предложения на продажу"},{default:(0,r.w5)((()=>[(0,r.Wm)(P,{"offer-id":(0,t.SU)(e).params.id},null,8,["offer-id"])])),_:1}))}});const _=g;var x=_}}]);
//# sourceMappingURL=offerEdit.40012f31.js.map