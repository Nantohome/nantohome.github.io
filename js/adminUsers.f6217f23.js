"use strict";(self["webpackChunklac"]=self["webpackChunklac"]||[]).push([[471],{5601:function(e,t,n){n.d(t,{F:function(){return a}});const a=e=>{if(!e.length)return e;let t=e.split("-");return t.length>1?t.reverse().join("."):(t=t[0].split("."),t.length>1?t.reverse().join("-"):e)}},5430:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(3396),i=n(4870),l=n(7139);const o={key:0,class:"lac-pagination"};var s=(0,a.aZ)({__name:"LacPagination",props:{pageSize:{default:10},total:{default:10},page:{default:0}},emits:["update:page"],setup(e,{expose:t,emit:n}){const s=e,r=(0,i.Fl)((()=>Math.ceil(s.total/s.pageSize))),d=()=>{s.page>=s.total||n("update:page",s.page+1)},c=()=>{s.page<=0||n("update:page",s.page-1)};return(0,a.YP)((()=>s.total),(()=>{})),t({next:d,prev:c}),(e,t)=>{const n=(0,a.up)("Button");return(0,i.SU)(r)>0?((0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(n,{icon:"pi pi-arrow-left",disabled:!e.page,rounded:"",outlined:"",text:"",severity:"info",title:"назад",class:"border-none h-min w-min p-2",onClick:c},null,8,["disabled"]),(0,a.Uk)(" "+(0,l.zw)(e.page+1)+"/"+(0,l.zw)((0,i.SU)(r))+" ",1),(0,a.Wm)(n,{icon:"pi pi-arrow-right",disabled:e.page===(0,i.SU)(r)-1,rounded:"",outlined:"",text:"",severity:"info",title:"назад",class:"border-none h-min w-min p-2",onClick:d},null,8,["disabled"])])):(0,a.kq)("",!0)}}}),r=n(89);const d=(0,r.Z)(s,[["__scopeId","data-v-876429e4"]]);var c=d},2789:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(3396),i=(n(7658),n(7139)),l=n(4870),o=n(1020),s=n(9286),r=n(3856),d=n(258),c=n(5601),u=n(2483),p=n(6408),f=n(5430),m=n(5845),g=n(3917);const v={class:"flex align-items-center justify-content-between pt16 pb16"},w={class:"flex align-items-center",style:{"font-size":"14px"}},k={class:"flex align-items-center"},y={key:2,class:"flex align-items-center"},h={class:"flex align-items-center"};var b=(0,a.aZ)({__name:"LacUsers",setup(e){const t=(0,u.tv)(),n=(0,d.S)(),b=(0,m.o)(),{config:x}=(0,o.Jk)(b),_=(0,s.N)(),C=(0,l.iH)(0),S=x.value.pagination?.user?.per_page||10,U=(0,l.iH)(S),z=(0,l.iH)(!1),D=(0,l.qj)({data:[],count:0}),O=(0,l.qj)([{text:"ФИО",field:"name",sort:"name"},{text:"Тип",field:"role.text",sort:"role"},{text:"Дата рождения",field:"dob",sort:"dob"},{text:"Телефон",field:"phone",sort:"phone"},{text:"E-mail",field:"email",sort:"email"},{text:"",field:"",sort:"",noSort:!0}]),j=(0,l.qj)({field:"name",dir:p.O.ACS}),E=(0,l.iH)(null);async function R(e){await t.push({name:"adminUserEdit",params:{id:e}})}async function Z(e){const t=async()=>{_.open(r.y.LOADER);const t=await n.remove(e);t?_.open(r.y.ERROR,{text:"Не удалось удалить пользователя"}):_.open(r.y.SUCCESS,{callback:H})};_.open(r.y.CONFIRM,{callback:t,text:"Удалить пользователя?"})}async function H(){const e={};e.page=C.value,j.field&&(e.order=j.field),j.dir&&(e.dir=j.dir),U.value&&(e.size=U.value),_.open(r.y.LOADER);const t=await n.list(e);D.data=t.data,D.count=t.count,_.close()}async function L(){console.log("LacUsers inited"),await H(),z.value=!0,await(0,a.Y3)()}(0,a.YP)((()=>[j.dir,j.field,C.value]),(()=>{H()})),(0,a.bv)(L);const W=e=>{_.open(r.y.LOADER),j.field=e.sortField,j.dir=e.sortOrder>0?p.O.ACS:p.O.DESC};return(e,t)=>{const n=(0,a.up)("Button"),o=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)("div",{class:"lac-table-module wrapper",ref_key:"table",ref:E},[(0,a._)("div",v,[(0,a._)("div",w,[(0,a.Wm)(o,(0,a.dG)({to:{name:"adminUserCreate"}},e.$props,{custom:""}),{default:(0,a.w5)((({href:t,navigate:i})=>[(0,a.Wm)(n,(0,a.dG)({onClick:i,size:"small",label:"Добавить"},e.$attrs,{href:t}),null,16,["onClick","href"])])),_:1},16)]),(0,a._)("div",k,[z.value?((0,a.wg)(),(0,a.j4)(f.Z,{key:0,page:C.value,"onUpdate:page":t[0]||(t[0]=e=>C.value=e),total:D.count,"page-size":U.value},null,8,["page","total","page-size"])):(0,a.kq)("",!0)])]),z.value?((0,a.wg)(),(0,a.j4)(g.Z,{key:0,data:D.data,style:{"min-height":"0px"},fields:O,"sort-field":"name",resizeMode:"fit","sort-order":1,id:"users",onSort:W},{"column-body":(0,a.w5)((({data:e,field:t,render:o})=>["dob"===t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,i.zw)(e.dob?(0,l.SU)(c.F)(e.dob):""),1)],64)):"phone"===t?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,i.zw)(e.phone?(0,l.SU)(b).formatPhone(e.phone):""),1)],64)):t?((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[(0,a.Uk)((0,i.zw)(o(e,t)),1)],64)):((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",h,[(0,a.Wm)(n,{onClick:t=>R(e.user_id),size:"small",icon:"pi pi-pencil",rounded:"",outlined:"",class:"border-none w-min h-min p-2",severity:"info"},null,8,["onClick"]),(0,a.Wm)(n,{onClick:t=>Z(e.user_id),size:"small",icon:"pi pi-trash",severity:"danger",rounded:"",outlined:"",class:"border-none w-min h-min p-2"},null,8,["onClick"])])]))])),_:1},8,["data","fields"])):(0,a.kq)("",!0)],512)}}}),x=n(89);const _=(0,x.Z)(b,[["__scopeId","data-v-23f75eb2"]]);var C=_;const S={class:"overflow-hidden flex flex-column"};var U=(0,a.aZ)({__name:"AdminUsers",setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)(C,{class:"flex-grow-1"})]))}});const z=U;var D=z}}]);
//# sourceMappingURL=adminUsers.f6217f23.js.map